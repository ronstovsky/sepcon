!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="./",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n,o){var r=this,i=u.default.clone(e);return n[i.id]?(this.root.logs.print({title:{content:"Tried To Create A Definition With Existing Id"},rows:[{style:"label",content:"Object Type"},{style:"code",content:t},{style:"label",content:"Definition Id"},{style:"code",content:i.id}]}),!1):(i.extend&&(n[i.extend]?i.extend=n[i.extend].definition:this.root.logs.print({title:{content:"Tried To Extend A Non-Existing Definition"},rows:[{style:"label",content:"Object Type"},{style:"code",content:t},{style:"label",content:"Definition Id"},{style:"code",content:i.id},{style:"label",content:"Extended Id"},{style:"code",content:i.extend}]})),i.decorators&&(i.decorators=i.decorators.filter(function(e){return!!n[e]||(r.root.logs.print({title:{content:"Tried To Decorate A Definition With a Non-Existing One"},rows:[{style:"label",content:"Object Type"},{style:"code",content:t},{style:"label",content:"Definition Id"},{style:"code",content:i.id},{style:"label",content:"Decorator Id"},{style:"code",content:e}]}),!1)}),i.decorators=i.decorators.map(function(e){return u.default.clone(n[e].definition)})),n[i.id]=new o(i,this.root),n[i.id])}Object.defineProperty(t,"__esModule",{value:!0}),t.SepCon=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(19),l=o(s),c=(n(1),n(2)),u=o(c),f=function(){function e(t){r(this,e),t&&(this.hash=t.hash),this.root=new l.default(this,t),this.classes=this.root.classes,this.setConfiguration=this.root.setConfiguration.bind(this.root),this.modify=this.root.executeModifier.bind(this.root)}return a(e,[{key:"createData",value:function(e){return i.call(this,e,"data",this.root.datas,this.root.classes.Data)}},{key:"createModifier",value:function(e){return i.call(this,e,"modifier",this.root.modifiers,this.root.classes.Modifier)}},{key:"createComponent",value:function(e){var t=this;return i.call(this,e,"component",this.root.components,this.root.classes.ComponentDefinition),{id:e.id,createTag:function(){return t.createTag(e.id)}}}},{key:"createTag",value:function(e){return new this.root.classes.ComponentTag(this,e)}}]),e}(),h=function(){var e=new f;return e.createScope=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.hash=parseInt(1e3*Date.now()+Math.round(1e3*Math.random())).toString(36),new f(e)},e}();t.SepCon=h,t.default=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TAG_PREFIX="x-sepcon-",t.TAG_PROPERTIES="data-properties",t.TAG_METHODS="data-methods",t.TAG_IDENTIFIER="data-identifier",t.ADD_COMPONENT_DEFINITION="add-component-definition",t.ADD_COMPONENT="add-component",t.DATA_CHANGED="data-changed",t.DATA_CHANGES_AFFECTING="data-changes-affecting"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(1);t.default={clone:function(e,t){if(null===e||"object"!=("undefined"==typeof e?"undefined":o(e)))return e;if(e.constructor!=Object&&e.constructor!=Array)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e.constructor(e);t=t||new e.constructor;for(var n in e)t[n]="undefined"==typeof t[n]?this.clone(e[n],null):t[n];return t},extend:function(e,t){var n=this.clone(e);n||(n={});for(var r in t)n.hasOwnProperty(r)&&"object"===o(t[r])?n[r]=this.extend(e[r],t[r]):n[r]=t[r];return n},concatMethods:function(e,t){return function(){return e.apply(this,arguments),t.apply(this,arguments)}},hookString:function(e,t){return(e?e+":":"")+t},formatValueForValidJSON:function(e){if(0===e)return 0;if(void 0===e)return null;if("object"===("undefined"==typeof e?"undefined":o(e)))if(e instanceof Array)for(var t=0,n=e.length;t<n;t++)e[t]=this.formatValueForValidJSON(e[t]);else for(var r in e)e[r]=this.formatValueForValidJSON(e[r]);return e},isInDome:function(e){for(var t=e.parentNode;t&&"body"!=t.tagName.toLowerCase();)t=t.parentNode;return!!t},isDeepNestedInSameComponent:function(e){for(var t=this.getComponentElementsPath(e,!0,!0),n=0,o=t.length-1;n<o;n++)if(t[n]===e.tagName)return!0;return!1},getParentComponentElement:function(e){var t=e,n=void 0;do{if(n=t.parentNode,!n)break;if(n._componentElement||0===n.tagName.toLowerCase().indexOf(r.TAG_PREFIX))return n;t=n}while("body"!=n.tagName.toLowerCase());return!1},getComponentElementNameForPath:function(e){var t=e.getAttribute(r.TAG_IDENTIFIER)||null;if(!t){var n=this.getComponentElementSiblings(e),o=this.getComponentElementIndex(e,n);t="("+o+")"}return e.tagName+" "+t},getComponentElementsPath:function(e,t,n){var o=e,r=void 0,i=[];do r=this.getParentComponentElement(o),!t&&r.tagName?i.push(this.getComponentElementNameForPath(r)):r.tagName&&i.push(r.tagName),o=r;while(r);return i.reverse(),t?i.push(e.tagName):i.push(this.getComponentElementNameForPath(e)),n?i:i.join(">")},getComponentElementSiblings:function(e){var t=this,n=this.getParentComponentElement(e),o=n?Array.from(n.getElementsByTagName(e.tagName)):[];return o.length>1&&(o=o.filter(function(e){return!(!e._componentElement||e._componentElement.parent!==n)||t.getParentComponentElement(e)===n})),o},getComponentElementIndex:function(e,t){for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return 0},getComponent:function(e,t){if(t.component&&t.component.mapItem)return t.component.mapItem;for(var n=t._componentElement.path,o=0,r=e.length;o<r;o++){var i=e[o];if(i&&(i.element===t||i.path===n))return t.component=i.element.component,i.setElement(t),i}return!1},getLooseComponent:function(e,t){var n=t.tagName,o=t.getAttribute(r.TAG_IDENTIFIER),i=e.filter(function(e){return e&&e.tag===n}),a=null;return i.forEach(function(e){if(!a){var t=e.id===o,r=e.tag===n;r&&t&&(a=e)}}),o||(a=this.getComponent(i,t)),a}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default={setChanges:function(e,t,o,r,i,a,s){e||(e={}),t||(t={});var l={};for(var c in t){var u="object"===n(e[c])&&null!==e[c],f="object"===n(t[c])&&null!==t[c],h=!1;if(u||f){var d=e[c]?JSON.stringify(e[c]):"",p=t[c]?JSON.stringify(t[c]):"";if(h=d!==p)if(r)l[c]=this.getChangedAsObject(e[c],t[c]);else{var m=i?i+"."+c:c;l[m]=this.getChangedAsObject(e[c],t[c]);var v=this.setChanges(e[c],t[c],u&&o,r,m,e,c);Object.keys(v).length>0&&Object.assign(l,v)}}else if(h=e[c]!=t[c]){var g=i?i+"."+c:c,b=t[c]?JSON.parse(JSON.stringify(t[c])):t[c],y=e[c]?JSON.parse(JSON.stringify(e[c])):e[c];l[g]=this.getChangedAsObject(y,b)}h&&o&&(a?(a[s]||(a[s]=t),a[s][c]=t[c]):e[c]=t[c])}return l},getChangedAsObject:function(e,t){return{oldValue:"undefined"!=typeof e?JSON.parse(JSON.stringify(e)):null,newValue:"undefined"!=typeof t?JSON.parse(JSON.stringify(t)):null}}}},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(20);var a=function(){function e(t){o(this,e),this.active=!0}return i(e,[{key:"setActive",value:function(e){return this.active=e,this}},{key:"print",value:function(e){var t=this;return!!this.active&&(e.content&&this.executeConsole(e),e.title&&(e.title.style="title",e.title.type="groupCollapsed",this.executeConsole(e.title)),e.rows.forEach(function(e){return t.executeConsole(e)}),void(e.title&&(e.title.type="groupEnd",this.executeConsole(e.title))))}},{key:"getStyle",value:function(e){switch(e){case"title":return"font-weight: bold; color: black; background: #f0f0f0; line-height: 1.2em; padding: .1em .2em";case"label":return"color: white; background: #aaaaaa; border-bottom: solid 0.2em #999999; line-height: 1.4em; padding: .1em .2em";case"code":return"font-style: italic; background: #f5f5f5; line-height: 1.2em; padding: .1em 0 .1em";case"info":return"line-height: 1.4em; padding: .1em .2em"}return e}},{key:"executeConsole",value:function(e){e.type=e.type||"log","object"!==r(e.content)||null===e.content||e.content instanceof Element||(e.content=JSON.stringify(e.content,null,2)),e.style?(e.style=this.getStyle(e.style),console[e.type]("%c%s",e.style,e.content)):console[e.type](e.content)}}]),e}();t.default=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(2),s=o(a),l=function(){function e(t,n){r(this,e),this.base=t,this.config=n}return i(e,[{key:"startSequence",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mount",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.params=n,this.sequence=t,this.seq=this.config[t];var o=Promise;this.handleSequenceStep("pre")&&o.resolve().then(function(){e.handleSequenceStep(!1)&&window.requestAnimationFrame(function(){e.handleSequenceStep("post")})})}},{key:"handleSequenceStep",value:function(e){for(var t=0,n=this.seq.sequence.length;t<n;t++){var o=this.seq.sequence[t],r=this.getStepParams(o,e),i=void 0;switch(o.target){case"component":case"modifier":i=this.base.scoped;break;case"state":i=this.base.state.scoped}var a=s.default.hookString(e,o.action);if(i[a]){var l=i[a].apply(i,r);if(l===!1)return!1;this.handleStepResponse(o,e,l)}else this.handleStepResponse(o,e)}return!0}},{key:"getStepParams",value:function(e,t){return this.seq.send?this.seq.send.apply(this,[e,t]):this.params}},{key:"handleStepResponse",value:function(e,t,n){return this.seq.retrieve?this.seq.retrieve.apply(this,[e,t,n]):n}}]),e}();t.default=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new Map,o={},r={add:function(e){if(n.has(e))return n.get(e);var t=parseInt(1e3*Date.now()+Math.round(1e3*Math.random())).toString(36);return n.set(e,t),o[t]=e,t},get:function(e){return void 0!==o[e]?o[e]:null}};t.default=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={formatGlobals:function(e){var t={};if(!e)return t;for(var n in e){var o=e[n],r=o.data,i=o.key;t[r]||(t[r]=[]),t[r].push(i)}return t},isGlobalChanged:function(e,t,n){if(e&&e[t])for(var o=0,r=n.length;o<r;o++)if(e[t].indexOf(n[o])>=0)return!0;return!1}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(2),c=o(l);n(21);var u=n(1),f=function(){function e(t,n){a(this,e);var o=t.component;return t.extend&&(o=c.default.extend(t.extend,t.component),o.super=t.extend,o.state.super=t.extend.state),this.definition=o,this.root=n,this.tag=u.TAG_PREFIX+(this.root.hash?this.root.hash+"-":"")+t.id,t.decorators&&t.decorators.length&&t.decorators.length>0&&t.decorators.forEach(this.addDecorator.bind(this)),this.root.addComponentDefinition(this),this.registerElement(),this}return s(e,[{key:"addDecorator",value:function(e){e.state&&(this.definition.state||(this.definition.state={}),this.addDecoratorToState(e)),this.addDecoratorToComponent(e)}},{key:"addDecoratorToState",value:function(e){var t=this,n=["local","external","global"];e.state.props&&(n.forEach(function(n){e.state.props[n]&&t.addToStateSegregation(e.state.props[n],"props",n)}),e.state.props=null),e.state.methods&&(this.definition.state.methods||(this.definition.state.methods={}),n.forEach(function(n){e.state.methods[n]&&t.addToStateSegregation(e.state.methods[n],"methods",n)}),e.state.methods=null),e.state.routes&&(this.addToStateRoutes(e.state.routes),e.state.routes=null),this.addToState(e.state),e.state=null}},{key:"addToStateSegregation",value:function(e,t,n){this.definition.state[t]||(this.definition.state[t]={}),this.definition.state[t][n]||(this.definition.state[t][n]={});for(var o in e)this.definition.state[t][n][o]?"methods"!==t||"local"!==n&&"eternal"!==n||(this.definition.state[t][n][o]=c.default.concatMethods(e[o],this.definition.state[t][n][o])):this.definition.state[t][n][o]=e[o]}},{key:"addToStateRoutes",value:function(e){this.definition.state.routes&&0!==this.definition.state.routes.length?this.definition.state.routes=this.definition.state.routes.concat(e):this.definition.state.routes=e}},{key:"addToState",value:function(e){for(var t in e)this.definition.state[t]?"function"==typeof e[t]&&(this.definition.state[t]=c.default.concatMethods(e[t],this.definition.state[t])):this.definition.state[t]=e[t]}},{key:"addDecoratorToComponent",value:function(e){for(var t in e)this.definition[t]?"function"==typeof e[t]&&(this.definition[t]=c.default.concatMethods(e[t],this.definition[t])):this.definition[t]=e[t]}},{key:"registerElement",value:function(){var e=this,t=this.root;if("function"!=typeof HTMLElement){var n=function(){};n.prototype=HTMLElement.prototype,HTMLElement=n}var o=function(n){function o(){return a(this,o),r(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return i(o,n),s(o,[{key:"connectedCallback",value:function(){for(var n=this,o=this.children,r=o.length,i=r-1>>0,a=[];r--;)a[i--]=o[r];this.originalChildren=a,this.originalInnerHTML=this.innerHTML,this.innerHTML="",Promise.resolve().then(function(){if(!c.default.isInDome(n))return!1;if(c.default.isDeepNestedInSameComponent(n))return t.logs.print({title:{content:"Components Cannot Be Nested Inside Themselves"},rows:[{style:"label",content:"Components Path"},{style:"code",content:c.default.getComponentElementsPath(n,!0,!0)},{style:"label",content:"DOM Element"},{content:n}]}),!1;var o=c.default.getParentComponentElement(n);if(n._componentElement={isInitialized:!1,path:c.default.getComponentElementsPath(n),init:function(){if(!c.default.isInDome(n))return void(n.component=!1);var r=!1;if(!n.component&&o){r=c.default.getComponent(t.componentElements,o);var i=!!r&&c.default.getLooseComponent(r.children,n);i&&(n.component=i.component)}n.component?n.component.resume(n):(n.component=new t.classes.Component(e.definition,t,n,r,o),n.component.initialize()),n._componentElement.isInitialized=!0}},o){var r=o._componentElement,i=!!r&&r.isInitialized;r&&i&&n._componentElement.init()}else n._componentElement.init();t.componentElementAdded(n)})}},{key:"disconnectedCallback",value:function(){this.component&&this.component.onDestroy()}},{key:"attributeChangedCallback",value:function(){}}]),o}(HTMLElement);customElements.define(this.tag,o)}}]),e}();t.default=f},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(2),l=o(s),c=n(3),u=o(c),f=n(4),h=(o(f),n(1)),d=function(){function e(t,n,o,i,a){var s=this;r(this,e),this.root=n,this.active=!1,this._eventsCallbacks={},this.scoped=l.default.clone(t),this.scoped.html=o.originalInnerHTML,this.scoped.children=o.originalChildren,this.scoped.element=o,this.scoped.id=o.getAttribute(h.TAG_IDENTIFIER),this.scoped.bindEvents=function(){return s.bindEvents()},delete this.scoped.state,this.scoped.super&&delete this.scoped.super.state,this.parent=i,this.state=new this.root.classes.ComponentState(t.state,this,this.root),this.sequencer=new this.root.classes.Sequencer(this,this.root.sequencerConfig),this.collectedDataChanges={},this.timer=null,this.mapItem=this.root.addComponent(this,o,a)}return a(e,[{key:"bindEvents",value:function(){var e=this;this.scoped.events&&(this.scoped.isInitiatedEvents&&this.unbindEvents(),this.scoped.events.forEach(function(t){var n=t.selector?e.scoped.element.querySelectorAll(t.selector):e.scoped.element;if(e.validateEvents(n,t,!0)){e._eventsCallbacks[t.selector+":"+t.event+":"+t.callback]=e.scoped[t.callback].bind(e.scoped);for(var o in n){var r=n[o];"object"===("undefined"==typeof r?"undefined":i(r))&&null!==r&&r.addEventListener(t.event,e._eventsCallbacks[t.selector+":"+t.event+":"+t.callback],!1)}}}),this.scoped.isInitiatedEvents=!0)}},{key:"unbindEvents",value:function(){var e=this;this.scoped.events&&this.scoped.isInitiatedEvents&&(this.scoped.events.forEach(function(t){var n=t.selector?e.scoped.element.querySelector(t.selector):e.scoped.element;e.validateEvents(n,t)&&n.removeEventListener(t.event,e._eventsCallbacks[t.selector+":"+t.event+":"+t.callback],!1)}),this.scoped.isInitiatedEvents=!1)}},{key:"validateEvents",value:function(e,t,n){return e?!!this.scoped[t.callback]||(this.root.logs.print({title:{content:"Could Not Find The Specified Handler For "+(n?"Binding":"Unbinding")+" "+(n?"To":"From")+" An Event"},rows:[{style:"label",content:"existing methods"},{style:"code",content:Object.keys(this.scoped.methods)},{style:"label",content:"event object"},{style:"code",content:t}]}),!1):(this.root.logs.print({title:{content:"Could Not Find An Element For "+(n?"Binding":"Unbinding")+" An Event "+(n?"To":"From")},rows:[{style:"label",content:"DOM element"},{style:"code",content:this.scoped.element},{style:"label",content:"event object"},{style:"code",content:t}]}),!1)}},{key:"initialize",value:function(e){this.active=!0,this.setStateData(),this.sequencer.startSequence("mount")}},{key:"resume",value:function(e){if(this.active=!0,this.unbindEvents(),this.scoped.element=e,!this.currentHtml)return void this.initialize();this.setStateData();var t=this.scoped.html!=this.scoped.element.originalInnerHTML;this.scoped.html=this.scoped.element.originalInnerHTML,this.scoped.children=this.scoped.element.originalChildren,this.scoped.element.innerHTML=this.currentHtml,this.bindEvents(),this.state.addRoutes();var n=u.default.setChanges(this.componentPrevProps,this.scoped.props);Object.keys(n).length>0||t?this.sequencer.startSequence("externalChange",[n]):this.sequencer.startSequence("resume")}},{key:"updateState",value:function(){this.scoped.props=this.state.getProps(),this.scoped.methods=this.state.getMethods()}},{key:"setStateData",value:function(){this.state.setExternals(),this.state.updateReferencedProps(),this.state.updateGlobalProps(),this.mapItem.setRefGlobal()}},{key:"onStateChange",value:function(e){this.sequencer.startSequence("localChange",[e])}},{key:"onReferenceChange",value:function(e){var t=this.state.getReferenceStatePropNames(e);this.sequencer.startSequence("referenceChange",[t])}},{key:"onGlobalStateChange",value:function(e,t){var n=this,o=this.state.getGlobalStatePropNames(e,t);Object.assign(this.collectedDataChanges,o),clearTimeout(this.timer),this.timer=setTimeout(function(){n.debounceGlobalStateChange()},10)}},{key:"debounceGlobalStateChange",value:function(){this.sequencer.startSequence("globalChange",[this.collectedDataChanges]),this.timer=null,this.collectedDataChanges={}}},{key:"onDescendantChange",value:function(e){var t=e||this;e&&this.sequencer.startSequence("descendantChange",[e.scoped]),this.mapItem.parent&&this.mapItem.parent.component.onDescendantChange(t)}},{key:"onRender",value:function(e){e&&"string"==typeof e&&e!=this.currentHtml&&(this.scoped.element.innerHTML=this.currentHtml=e,this.bindEvents())}},{key:"onDestroy",value:function(){this.active=!1,this.state.removeRoutes(),this.unbindEvents(),this.componentPrevProps=l.default.clone(this.scoped.props),this.sequencer.startSequence("destroy")}}]),e}();t.default=d},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentDefinitionItem=t.ComponentItem=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),s=n(7),l=o(s),c=function(){function e(t,n){r(this,e),this.children=[],this.parent=null,this.definition=null,this.component=t,this.selfGlobal={},this.refGlobal={},this.setElement(n),this.extractElementData()}return i(e,[{key:"setParent",value:function(e){this.parent=e}},{key:"addChild",value:function(e){this.children.push(e)}},{key:"setDefinition",value:function(e){this.definition=e}},{key:"setElement",value:function(e){this.element=e,this.id=e.getAttribute(a.TAG_IDENTIFIER),this.tag=e.tagName,this.path=e._componentElement.path,e.component&&(this.component=e.component),this.extractElementData()}},{key:"extractElementData",value:function(){this.external={props:null,methods:null,html:this.element.originalInnerHTML,children:this.element.originalChildren};var e=this.element.getAttribute(a.TAG_PROPERTIES),t=this.element.getAttribute(a.TAG_METHODS);this.external.props=e?JSON.parse(e):null,this.external.methods=t?JSON.parse(t):null}},{key:"setSelfGlobal",value:function(e){this.selfGlobal=l.default.formatGlobals(e)}},{key:"setRefGlobal",value:function(){this.refGlobal=l.default.formatGlobals(this.component.state.reference.global)}},{key:"checkChanged",value:function(e,t){if(this.changed=!1,this.definition.changed)this.changed=!0;else if(Object.keys(this.refGlobal).length>0||Object.keys(this.selfGlobal).length>0){var n=Object.assign({},this.selfGlobal,this.refGlobal);this.changed=l.default.isGlobalChanged(n,e,t)}return this.changed}}]),e}(),u=function(){function e(t){r(this,e),this.definition=t,t.state&&t.state.props&&t.state.props.global&&(this.global=l.default.formatGlobals(t.state.props.global))}return i(e,[{key:"checkChanged",value:function(e,t){return this.changed=l.default.isGlobalChanged(this.global,e,t),this.changed}}]),e}();t.ComponentItem=c,t.ComponentDefinitionItem=u},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(2),c=o(l),u=n(3),f=o(u),h=n(5),d=(o(h),n(6)),p=o(d),m=(n(1),{local:{},external:{},global:{}}),v=function(e){var t={methods:{},props:{}},n=Object.assign({},t,e);return n.methods=Object.assign({},m,n.methods),n.props=Object.assign({},m,n.props),n},g=function(e,t){var n={};if(!e)return{};for(var o in e){var r=e[o].data,i=e[o].key;t.datas[r]?n[o]=t.datas[r].getProp(i):t.logs.print({title:{content:"Trying To Reach An Undefined Data"},rows:[{style:"label",content:"Data Id"},{style:"code",content:r}]})}return JSON.parse(JSON.stringify(n))},b=function(e,t,n){var o=[],r=!1;switch(t){case"global":e.global[n]&&o.push(e.global[n]);case"external":e.external[n]&&o.push(e.external[n]);case"local":e.local[n]&&(r=!0,o.push(e.local[n]))}var i=function(){function e(){for(i=[].slice.call(arguments);t.length>0;)t.pop().apply(n,i)}var t=Object.assign([],o),n=this,i=[].slice.call(arguments),a=void 0;if(r)a=t.pop().apply(n,[e].concat(i));else for(;t.length>0;)t.pop().apply(n,i);return a};return i},y=function(e,t){var n=function(n){e.bindings[n]&&e.bindings[n].forEach(function(e){e.component.onReferenceChange(i({},n,t[n]))})};for(var o in t)n(o)},E=function(){function e(t,n,o){var i=this;r(this,e),this.root=o,this.definition=c.default.clone(v(t)),this.component=n,this.scoped=c.default.clone(this.definition),this.buildGlobalMethods(),this.scoped.setProps=function(e,t){var n=f.default.setChanges(i.scoped.props.local,e,t,!0);if(Object.keys(n).length>0){if(t)return void i.updateLocalProps(n);i.component.onStateChange(n)}},this.scoped.setGlobalProps=function(e){for(var t in e){var n=e[t],o=i.definition.props.global[t],r=null===n||"object"!==("undefined"==typeof n?"undefined":a(n)),s={};r&&o?delete i.definition.props.global[t]:r||(i.definition.props.global[t]=s[t]=e[t]),i.component.mapItem.setSelfGlobal(s),i.updateGlobalProps()}},this.scoped.setGlobalMethods=function(e){for(var t in e){var n=e[t],o=i.definition.methods.global[t],r=null===n||"object"!==("undefined"==typeof n?"undefined":a(n));r&&o?delete i.definition.methods.global[t]:r||(i.definition.methods.global[t]=e[t]),i.buildGlobalMethods()}},this.scoped.getProps=function(){return i.getProps()},this.scoped.getMethods=function(){return i.getMethods()},this.scoped.router=this.root.router,this.scoped.id=this.component.scoped.id,this.reference=Object.assign({},m),this.bindings={}}return s(e,[{key:"getProps",value:function(){var e=c.default.clone(this.scoped.props),t=Object.assign({},e.local,e.external,e.global);return t}},{key:"getMethods",value:function(){var e=c.default.clone(this.scoped.methods),t=["global","external","local"],n={};for(var o in t){var r=t[o];for(var i in e[r])n[i]||(n[i]=b(e,r,i).bind(this.scoped))}return n}},{key:"getGlobalDef",value:function(){var e={};return this.definition.props.global&&Object.assign(e,this.definition.props.global),this.reference.global&&Object.assign(e,this.reference.global),Object.keys(e).length>0?JSON.parse(JSON.stringify(e)):null}},{key:"getGlobalStatePropName",value:function(e,t){var n=this.getGlobalDef();for(var o in n)if(n[o].key===t&&n[o].data===e)return o}},{key:"getGlobalStatePropNames",value:function(e,t){var n={};for(var o in t){var r=this.getGlobalStatePropName(e,o);void 0!==r&&(n[r]=t[o])}return n}},{key:"getReferenceStatePropName",value:function(e){var t=["global","external","local"];for(var n in t){var o=t[n];for(var r in this.reference[o])if(this.reference[o][r].key===e)return r}}},{key:"getReferenceStatePropNames",value:function(e){var t={};for(var n in e){var o=this.getReferenceStatePropName(n);void 0!==o&&(t[o]=e[n])}return t}},{key:"updateLocalProps",value:function(e){for(var t in e)this.scoped.props.local[t]=e[t].newValue,y(this,e)}},{key:"updateReferencedProps",value:function(){var e=this;if(this.reference.parent){var t={global:{},external:{},local:{}};t.global=g(this.reference.global,this.root);for(var n in this.reference.external){var o=this.reference.external[n].key;t.external[n]=this.reference.parent.props.external[o]}var r=function(n){var o=function e(t,n){if(!t)return null;if(!t.reference.local[n])return t.scoped.props.local[n]?t.scoped.props.local[n]:e(t.reference.parent,n);var o=t.reference.local[n].key;return t.reference.parent.scoped.props.local[o]?t.reference.parent.scoped.props.local[o]:e(t.reference.parent,o)};t.local[n]=o(e,n)};for(var i in this.reference.local)r(i);var a=Object.assign({},t.local,t.external,t.global);Object.assign(this.scoped.props.external,a)}}},{key:"updateGlobalProps",value:function(){this.scoped.props.global=g(this.definition.props.global,this.root),this.reference.parent&&Object.assign(this.scoped.props.external,g(this.reference.global,this.root))}},{key:"buildGlobalMethods",value:function(){var e=this,t=function(t){e.scoped.methods.global[t]=function(){var e=[].slice.call(arguments),n=[this.definition.methods.global[t].modifier,this.definition.methods.global[t].key];if(this.definition.methods.global[t].pass){var o=this.definition.methods.global[t].pass.apply(this.scoped,e);n=n.concat(o),this.root.executeModifier.apply(this.root,n)}else n=n.concat(e),this.root.executeModifier.apply(this.root,n)}.bind(e)};for(var n in this.definition.methods.global)t(n)}},{key:"setExternals",value:function(){if(this.component.mapItem.external.props||this.component.mapItem.external.methods){var e=this.component.parent?this.component.parent.component:null,t=e?e.state:null;this.component.mapItem.external.props&&this.setExternalProperties(this.component.mapItem.external.props,t),this.component.mapItem.external.methods&&this.setExternalMethods(this.component.mapItem.external.methods,e,t)}this.component.mapItem.external.html&&(this.scoped.html=this.component.mapItem.external.html),this.component.mapItem.external.children&&(this.scoped.children=this.component.mapItem.external.children)}},{key:"setExternalProperties",value:function(e,t){var n={},o={global:{},external:{},local:{},parent:t};for(var r in e){var i=e[r];i.reference?this.setExternalReferencedProperty({name:r,value:e[r].reference},o,t):this.setExternalProperty({name:r,value:e[r].value},n)}this.scoped.props.external=n,this.reference=o}},{key:"setExternalProperty",value:function(e,t){t[e.name]=p.default.get(e.value)}},{key:"setExternalReferencedProperty",value:function(e,t,n){var o=this,r=e.name,i=e.value.split("."),a=i[0];i.shift(),i=i.join("."),t.parent.reference.global.hasOwnProperty(a)?(t.global[r]=t.parent.reference.global[a],i&&(t.global[r].key+="."+i)):t.parent.reference.external.hasOwnProperty(a)?t.external[r]=t.parent.reference.external[e.value]:t.parent.reference.local.hasOwnProperty(a)?!function(){t.local[r]=t.parent.reference.local[e.value];var n=function e(t,n){if(!t)return null;if(t.reference.local[n]){var r=t.reference.local[n].key;t.reference.parent.scoped.props.local[r]?t.reference.parent.bind(r,o):e(t.reference.parent,r);
}else t.scoped.props.local[n]?t.bind(n,o):e(t.reference.parent,n)};n(t.parent,a)}():t.parent.scoped.props.global.hasOwnProperty(a)?(t.global[r]=n.getGlobalDef()[a],i&&(t.global[r].key+="."+i)):t.parent.scoped.props.external.hasOwnProperty(a)?t.external[r]={key:e.value}:(t.local[r]={key:e.value},n.bind(a,this))}},{key:"setExternalMethods",value:function(e,t,n){var o={};for(var r in e){var i=e[r];i.reference?this.setExternalReferenceMethod({name:r,value:e[r]},o,t,n):this.setExternalMethod({name:r,value:e[r].value},o)}this.scoped.methods.external=Object.assign({},this.definition.methods.external,o)}},{key:"setExternalMethod",value:function(e,t){t[e.name]=p.default.get(e.value)}},{key:"setExternalReferenceMethod",value:function(e,t,n,o){var r=o.getMethods(),i=e.value;if(r[i.reference]){var a=e.name;t[a]=function(){r[i.reference].apply(n,arguments)}}}},{key:"bind",value:function(e,t){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(t)}},{key:"addRoutes",value:function(){var e=this;this.definition.routes&&this.definition.routes.forEach(function(t){return e.root.router.add(t,e.scoped)})}},{key:"removeRoutes",value:function(){this.definition.routes&&this.root.router.remove(this.scoped)}}]),e}();t.default=E},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(6),s=o(a),l=n(1),c=function(){function e(t,n){r(this,e),this._app=t,this._tag=n,this._methods={},this._props={},this._id=null,this._html=null}return i(e,[{key:"html",value:function(e){return this._html=e,this}},{key:"methods",value:function(e){var t={};for(var n in e){var o=e[n];t[n]={value:s.default.add(o)}}return Object.assign(this._methods,t),this}},{key:"refMethods",value:function(e){var t={};for(var n in e){var o=e[n];t[n]={reference:o}}return Object.assign(this._methods,t),this}},{key:"props",value:function(e){var t={};for(var n in e){var o=e[n];t[n]={value:s.default.add(o)}}return Object.assign(this._props,t),this}},{key:"refProps",value:function(e){var t={};for(var n in e){var o=e[n];t[n]={reference:o}}return Object.assign(this._props,t),this}},{key:"id",value:function(e){return this._id=e,this}},{key:"render",value:function(e){var t="";if(!e||"open"===e){var n=[];n.push(""+l.TAG_PREFIX+(this._app.hash?this._app.hash+"-":"")+this._tag),Object.keys(this._props).length>0&&n.push(l.TAG_PROPERTIES+"='"+JSON.stringify(this._props)+"'"),Object.keys(this._methods).length>0&&n.push(l.TAG_METHODS+"='"+JSON.stringify(this._methods)+"'"),this._id&&n.push(l.TAG_IDENTIFIER+'="'+this._id+'"'),t="<"+n.join(" ")+">"}return e||this._html&&(t+=this._html),e&&"close"!==e||(t+="</"+l.TAG_PREFIX+(this._app.hash?this._app.hash+"-":"")+this._tag+">"),t}}]),e}();t.default=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(2),l=o(s),c=n(3),u=o(c),f=function(){function e(t,n){r(this,e),this.root=n;var o=t.data;t.extend&&(o=l.default.extend(t.extend.data,t.data)),this.definition=l.default.clone(t),this.data=o}return a(e,[{key:"setProps",value:function(e){return e=l.default.formatValueForValidJSON(e),u.default.setChanges(this.data,e,!0)}},{key:"resetProps",value:function(){var e=l.default.formatValueForValidJSON(this.definition.data);return u.default.setChanges(this.data,e,!0)}},{key:"getProps",value:function(e){var t={};if(e)for(var n=0,o=e.length;n<o;n++)t[e[n]]="object"===i(e[n])?this.getProp(e[n].key,e[n].index):this.getProp(e[n]);else t=l.default.clone(this.data);return t}},{key:"getProp",value:function(e){for(var t=e.split("."),n=this.data,o=0,r=t.length;o<r;o++){if(void 0===n[t[o]])return void this.root.logs.print({title:{content:"Could Not Find a Requested Data Property"},rows:[{style:"label",content:"Data Id"},{style:"code",content:this.definition.id},{style:"label",content:"Properties Path"},{style:"code",content:e},{style:"label",content:"Data (snapshot)"},{style:"code",content:l.default.clone(this.data)}]});n=n[t[o]]}switch("undefined"==typeof n?"undefined":i(n)){case"string":case"number":return n}return JSON.parse(JSON.stringify(n))}}]),e}();t.default=f},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(2),s=o(a),l=function(){function e(t,n){var o=this;r(this,e);var i=t.modifier;t.extend&&(i=s.default.extend(t.extend,t.modifier),i.super=t.extend),this.definition=i,this.id=t.id,this.root=n,this.scoped=s.default.clone(i),this.debounced={},this.timer=null,this.collectedDataChanges={};for(var a in this.scoped.methods)this.scoped.methods[a]=this.scoped.methods[a].bind(this.scoped);this.scoped.resetProps=function(e){o.root.changedData(e,o.root.datas[e].resetProps())},this.scoped.setProps=function(e,t){var n=s.default.clone(t);o.root.changedData(e,o.root.datas[e].setProps(n))},this.scoped.getProp=function(e,t){return o.root.datas[e].getProp(t)},this.scoped.getProps=function(e,t){return o.root.datas[e].getProps(t)},this.scoped.modify=this.root.executeModifier.bind(this.root),this.scoped.router=this.root.router,this.mapItem=this.root.addModifier(this),this.sequencer=new n.classes.Sequencer(this,n.sequencerConfig),this.sequencer.startSequence("mountModifier")}return i(e,[{key:"stack",value:function(e,t){this.debounced[e]=t}},{key:"execute",value:function(){for(var e in this.debounced)this.scoped.methods[e].apply(this.scoped,this.debounced[e]);this.debounced={}}},{key:"has",value:function(e){return!!this.scoped.methods[e]}},{key:"addRoutes",value:function(){var e=this;this.definition.routes&&this.definition.routes.forEach(function(t){return e.root.router.add(t,e.scoped)})}},{key:"getGlobalStatePropName",value:function(e,t){var n=this.definition.props;for(var o in n)if(n[o].key===t&&n[o].data===e)return o;return!1}},{key:"getGlobalStatePropNames",value:function(e,t){var n={};for(var o in t){var r=this.getGlobalStatePropName(e,o);r&&(n[r]=t[o])}return n}},{key:"onGlobalStateChange",value:function(e,t){var n=this,o=this.getGlobalStatePropNames(e,t);Object.assign(this.collectedDataChanges,o),clearTimeout(this.timer),this.timer=setTimeout(function(){n.debounceGlobalStateChange()},10)}},{key:"debounceGlobalStateChange",value:function(){this.timer=null,this.sequencer.startSequence("globalChangeModifier",[this.collectedDataChanges]),this.collectedDataChanges={}}}]),e}();t.default=l},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ModifierItem=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=(n(1),n(7)),s=o(a),l=function(){function e(t){r(this,e),this.modifier=t,this.definition=t.definition,this.definition.props&&(this.global=s.default.formatGlobals(this.definition.props))}return i(e,[{key:"checkChanged",value:function(e,t){return this.changed=s.default.isGlobalChanged(this.global,e,t),this.changed}}]),e}();t.ModifierItem=l},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(t){n(this,e),this.routes=[],t&&this.config(t)}return o(e,[{key:"config",value:function(e){return e.mode&&"history"===e.mode&&history.pushState?this.mode="history":this.mode="hash",e.root?this.root=this.clearSlashes(e.root)+"/":this.root="/",this}},{key:"getFragment",value:function(){var e="";if("history"===this.mode)e=this.clearSlashes(decodeURI(location.pathname+location.search)),e=e.replace(/\?(.*)$/,""),e="/"!=this.root?e.replace(this.root,""):e;else{var t=window.location.href.match(/#(.*)$/);e=t?t[1]:""}return this.clearSlashes(e)}},{key:"clearSlashes",value:function(e){return e.toString().replace(/\/$/,"").replace(/^\//,"")}},{key:"add",value:function(e,t){e.state=t,this.routes.push(e);var n=this.check(null,e);return this.executeHandlers(n),this}},{key:"remove",value:function(e){for(var t=0;t<this.routes.length;t++){var n=this.routes[t];if(n.state===e)return this.routes.splice(t,1),this}return this}},{key:"flush",value:function(){return this.routes=[],this.mode=null,this.root="/",this}},{key:"check",value:function(e,t){function n(e){var t=o.match(e.match);if(t)return!0}var o=e||this.getFragment(),r=[];if(t)n(t)&&r.push(t);else for(var i=0;i<this.routes.length;i++)n(this.routes[i])&&r.push(this.routes[i]);return r}},{key:"executeHandlers",value:function(e){if(0!==e.length)for(var t=0,n=e.length;t<n;t++)e[t].handler.call(e[t].state)}},{key:"listen",value:function(){var e=this,t=e.getFragment(),n=function(){if(t!==e.getFragment()){t=e.getFragment();var n=e.check(t);e.executeHandlers(n)}};return clearInterval(this.interval),this.interval=setInterval(n,50),this}},{key:"navigate",value:function(e){return e=e?e:"","history"===this.mode?history.pushState(null,null,this.root+this.clearSlashes(e)):window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+e,this}}]),e}();t.default=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mode:"history",root:"/"}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mount:{send:function(e,t){return"state"===e.target?"pre"===t&&this.base.state.addRoutes():this.base.updateState(),[!0]},retrieve:function(e,t,n){"component"===e.target&&this.base.onRender(n)},sequence:[{target:"state",action:"mount"},{target:"component",action:"render"}]},resume:{send:function(e,t){return"component"===e.target&&this.base.updateState(),[!0]},sequence:[{target:"state",action:"resume"},{target:"component",action:"render"}]},localChange:{send:function(e,t){return"state"===e.target?t===!1&&(this.base.state.updateLocalProps(this.params[0]),this.base.updateState()):this.base.updateState(),this.params},retrieve:function(e,t,n){"component"===e.target&&(this.base.onRender(n),"post"===t&&this.base.onDescendantChange())},sequence:[{target:"state",action:"change"},{target:"component",action:"render"}]},externalChange:{send:function(e,t){return"component"===e.target&&this.base.updateState(),this.params},retrieve:function(e,t,n){"component"===e.target&&(this.base.onRender(n),"post"===t&&this.base.onDescendantChange())},sequence:[{target:"state",action:"change"},{target:"component",action:"render"}]},globalChange:{send:function(e,t){return"state"===e.target?t===!1&&(this.base.state.updateGlobalProps(),this.base.updateState()):this.base.updateState(),this.params},retrieve:function(e,t,n){"component"===e.target&&(this.base.onRender(n),"post"===t&&this.base.onDescendantChange())},sequence:[{target:"state",action:"change"},{target:"component",action:"render"}]},referenceChange:{send:function(e,t){return"state"===e.target?t===!1&&this.base.state.updateReferencedProps():this.base.updateState(),this.params},retrieve:function(e,t,n){"component"===e.target&&(this.base.onRender(n),"post"===t&&this.base.onDescendantChange())},sequence:[{target:"state",action:"change"},{target:"component",action:"render"}]},descendantChange:{sequence:[{target:"component",action:"descendantChange"}]},destroy:{sequence:[{target:"state",action:"destroy"},{target:"component",action:"destroy"}]},mountModifier:{send:function(e,t){return"pre"===t&&this.base.addRoutes(),this.params},sequence:[{target:"modifier",action:"mount"}]},globalChangeModifier:{sequence:[{target:"modifier",action:"change"}]}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(8),s=o(a),l=n(9),c=o(l),u=n(11),f=o(u),h=n(14),d=o(h),p=n(13),m=o(p),v=n(12),g=o(v),b=n(5),y=o(b),E=n(16),C=o(E),T=n(4),M=o(T),S=n(2),k=o(S),O=n(10),w=n(15),P=(n(1),n(18)),_=o(P),L=n(17),x=o(L),D=new C.default,H=function(){function e(t,n){r(this,e),this.classes={ComponentDefinition:s.default,Component:c.default,ComponentState:f.default,Modifier:d.default,Data:m.default,ComponentTag:g.default,Sequencer:y.default,Logs:M.default},this.components=[],this.componentsDefinition=[],this.componentElements=[],this.modifiersDefinition=[],this.router=D,this.logs=new M.default,this.datas={},this.modifiers={},this.modifiers={},t.hash&&(this.hash=t.hash),this.sequencerConfig=k.default.clone(_.default),this.routerConfig=k.default.clone(x.default),this.setConfiguration(n),this.router.config(this.routerConfig),this.router.listen()}return i(e,[{key:"setConfiguration",value:function(e){e&&(e.sequencer&&(this.sequencerConfig=Object.assign(this.sequencerConfig,e.sequencer)),e.router&&(this.routerConfig=Object.assign(this.routerConfig,e.router),this.router.config(this.routerConfig)),void 0!==e.logs&&this.logs.setActive(e.logs))}},{key:"executeModifier",value:function(e,t){var n=this,o=[].slice.call(arguments),r=o.slice(2);this.modifiers[e]&&this.modifiers[e].has(t)&&this.modifiers[e].stack(t,r),Promise.resolve().then(function(){for(var e in n.modifiers)n.modifiers[e].execute()})}},{key:"changedData",value:function(e,t){if(0!==Object.keys(t).length){for(var n in this.componentsDefinition)this.componentsDefinition[n].checkChanged(e,Object.keys(t));this.componentElements.forEach(function(n){n.element.component.active&&n.checkChanged(e,Object.keys(t))&&n.element.component.onGlobalStateChange(e,t)}),this.modifiersDefinition.forEach(function(n){n.checkChanged(e,Object.keys(t))&&n.modifier.onGlobalStateChange(e,t)})}}},{key:"addComponentDefinition",value:function(e){this.componentsDefinition[e.tag]=new O.ComponentDefinitionItem(e.definition)}},{key:"componentElementAdded",value:function(){this.componentElements.forEach(function(e){e.element._componentElement.isInitialized||(null===e.parent?e.element._componentElement.init():e.parent._componentElement&&e.parent._componentElement.isInitialized&&e.element._componentElement.init())})}},{key:"addComponent",value:function(e,t,n){var o=new O.ComponentItem(e,t);return this.componentElements.push(o),this.componentElements.forEach(function(e){null===o.parent&&e.element===n&&o.setParent(e)}),null!==o.parent&&o.parent.addChild(o),o.setDefinition(this.componentsDefinition[o.tag.toLowerCase()]),o}},{key:"addModifier",value:function(e){this.modifiersDefinition.push(new w.ModifierItem(e))}}]),e}();t.default=H},function(e,t){!function(e){"use strict";e.console||(e.console={});for(var t,n,o=e.console,r=function(){},i=["memory"],a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=i.pop();)o[t]||(o[t]={});for(;n=a.pop();)"function"!=typeof o[n]&&(o[n]=r)}("undefined"==typeof window?this:window)},function(e,t){(function(t){function n(e,t){"use strict";function n(){var e=O.splice(0,O.length);for($e=0;e.length;)e.shift().call(null,e.shift())}function o(e,t){for(var n=0,o=e.length;n<o;n++)m(e[n],t)}function r(e){for(var t,n=0,o=e.length;n<o;n++)t=e[n],H(t,re[a(t)])}function i(e){return function(t){je(t)&&(m(t,e),o(t.querySelectorAll(ie),e))}}function a(e){var t=Fe.call(e,"is"),n=e.nodeName.toUpperCase(),o=se.call(oe,t?ee+t.toUpperCase():Y+n);return t&&-1<o&&!s(n,t)?-1:o}function s(e,t){return-1<ie.indexOf(e+'[is="'+t+'"]')}function l(e){var t=e.currentTarget,n=e.attrChange,o=e.attrName,r=e.target,i=e[X]||2,a=e[$]||3;!Ye||r&&r!==t||!t[F]||"style"===o||e.prevValue===e.newValue&&(""!==e.newValue||n!==i&&n!==a)||t[F](o,n===i?null:e.prevValue,n===a?null:e.newValue)}function c(e){var t=i(e);return function(e){O.push(t,e.target),$e&&clearTimeout($e),$e=setTimeout(n,1)}}function u(e){Qe&&(Qe=!1,e.currentTarget.removeEventListener(K,u)),o((e.target||M).querySelectorAll(ie),e.detail===q?q:A),Ne&&d()}function f(e,t){var n=this;Ue.call(n,e,t),w.call(n,{target:n})}function h(e,t){xe(e,t),L?L.observe(e,Xe):(Ke&&(e.setAttribute=f,e[I]=_(e),e[j](Q,w)),e[j](W,l)),e[z]&&Ye&&(e.created=!0,e[z](),e.created=!1)}function d(){for(var e,t=0,n=Ae.length;t<n;t++)e=Ae[t],ae.contains(e)||(n--,Ae.splice(t--,1),m(e,q))}function p(e){throw new Error("A "+e+" type is already registered")}function m(e,t){var n,o=a(e);-1<o&&(D(e,re[o]),o=0,t!==A||e[A]?t!==q||e[q]||(e[A]=!1,e[q]=!0,o=1):(e[q]=!1,e[A]=!0,o=1,Ne&&se.call(Ae,e)<0&&Ae.push(e)),o&&(n=e[t+G])&&n.call(e))}function v(){}function g(e,t,n){var o=n&&n[R]||"",r=t.prototype,i=Le(r),a=t.observedAttributes||he,s={prototype:i};Ie(i,z,{value:function(){if(ke)ke=!1;else if(!this[ye]){this[ye]=!0,new t(this),r[z]&&r[z].call(this);var e=Oe[Pe.get(t)];(!Ce||e.create.length>1)&&E(this)}}}),Ie(i,F,{value:function(e){-1<se.call(a,e)&&r[F].apply(this,arguments)}}),r[J]&&Ie(i,V,{value:r[J]}),r[U]&&Ie(i,B,{value:r[U]}),o&&(s[R]=o),e=e.toUpperCase(),Oe[e]={constructor:t,create:o?[o,_e(e)]:[e]},Pe.set(t,e),M[N](e.toLowerCase(),s),C(e),we[e].r()}function b(e){var t=Oe[e.toUpperCase()];return t&&t.constructor}function y(e){return"string"==typeof e?e:e&&e.is||""}function E(e){for(var t,n=e[F],o=n?e.attributes:he,r=o.length;r--;)t=o[r],n.call(e,t.name||t.nodeName,null,t.value||t.nodeValue)}function C(e){return e=e.toUpperCase(),e in we||(we[e]={},we[e].p=new Se(function(t){we[e].r=t})),we[e].p}function T(){Ee&&delete e.customElements,fe(e,"customElements",{configurable:!0,value:new v}),fe(e,"CustomElementRegistry",{configurable:!0,value:v});for(var t=function(t){var n=e[t];if(n){e[t]=function(e){var t,o;return e||(e=this),e[ye]||(ke=!0,t=Oe[Pe.get(e.constructor)],o=Ce&&1===t.create.length,e=o?Reflect.construct(n,he,t.constructor):M.createElement.apply(M,t.create),e[ye]=!0,ke=!1,o||E(e)),e},e[t].prototype=n.prototype;try{n.prototype.constructor=e[t]}catch(o){be=!0,fe(n,ye,{value:e[t]})}}},n=k.get(/^HTML[A-Z]*[a-z]/),o=n.length;o--;t(n[o]));M.createElement=function(e,t){var n=y(t);return n?Be.call(this,e,_e(n)):Be.call(this,e)}}var M=e.document,S=e.Object,k=function(e){var t,n,o,r,i=/^[A-Z]+[a-z]/,a=function(e){var t,n=[];for(t in l)e.test(t)&&n.push(t);return n},s=function(e,t){t=t.toLowerCase(),t in l||(l[e]=(l[e]||[]).concat(t),l[t]=l[t.toUpperCase()]=e)},l=(S.create||S)(null),c={};for(n in e)for(r in e[n])for(o=e[n][r],l[r]=o,t=0;t<o.length;t++)l[o[t].toLowerCase()]=l[o[t].toUpperCase()]=r;return c.get=function(e){return"string"==typeof e?l[e]||(i.test(e)?[]:""):a(e)},c.set=function(e,t){return i.test(e)?s(e,t):s(t,e),c},c}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});t||(t="auto");var O,w,P,_,L,x,D,H,N="registerElement",I="__"+N+(1e5*e.Math.random()>>0),j="addEventListener",A="attached",G="Callback",q="detached",R="extends",F="attributeChanged"+G,V=A+G,J="connected"+G,U="disconnected"+G,z="created"+G,B=q+G,X="ADDITION",Z="MODIFICATION",$="REMOVAL",W="DOMAttrModified",K="DOMContentLoaded",Q="DOMSubtreeModified",Y="<",ee="=",te=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,ne=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],oe=[],re=[],ie="",ae=M.documentElement,se=oe.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},le=S.prototype,ce=le.hasOwnProperty,ue=le.isPrototypeOf,fe=S.defineProperty,he=[],de=S.getOwnPropertyDescriptor,pe=S.getOwnPropertyNames,me=S.getPrototypeOf,ve=S.setPrototypeOf,ge=!!S.__proto__,be=!1,ye="__dreCEv1",Ee=e.customElements,Ce="force"!==t&&!!(Ee&&Ee.define&&Ee.get&&Ee.whenDefined),Te=S.create||S,Me=e.Map||function(){var e,t=[],n=[];return{get:function(e){return n[se.call(t,e)]},set:function(o,r){e=se.call(t,o),e<0?n[t.push(o)-1]=r:n[e]=r}}},Se=e.Promise||function(e){function t(e){for(o=!0;n.length;)n.shift()(e)}var n=[],o=!1,r={catch:function(){return r},then:function(e){return n.push(e),o&&setTimeout(t,1),r}};return e(t),r},ke=!1,Oe=Te(null),we=Te(null),Pe=new Me,_e=String,Le=S.create||function e(t){return t?(e.prototype=t,new e):this},xe=ve||(ge?function(e,t){return e.__proto__=t,e}:pe&&de?function(){function e(e,t){for(var n,o=pe(t),r=0,i=o.length;r<i;r++)n=o[r],ce.call(e,n)||fe(e,n,de(t,n))}return function(t,n){do e(t,n);while((n=me(n))&&!ue.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),De=e.MutationObserver||e.WebKitMutationObserver,He=(e.HTMLElement||e.Element||e.Node).prototype,Ne=!ue.call(He,ae),Ie=Ne?function(e,t,n){return e[t]=n.value,e}:fe,je=Ne?function(e){return 1===e.nodeType}:function(e){return ue.call(He,e)},Ae=Ne&&[],Ge=He.attachShadow,qe=He.cloneNode,Re=He.dispatchEvent,Fe=He.getAttribute,Ve=He.hasAttribute,Je=He.removeAttribute,Ue=He.setAttribute,ze=M.createElement,Be=ze,Xe=De&&{attributes:!0,characterData:!0,attributeOldValue:!0},Ze=De||function(e){Ke=!1,ae.removeEventListener(W,Ze)},$e=0,We=!1,Ke=!0,Qe=!0,Ye=!0;if(N in M||(ve||ge?(D=function(e,t){ue.call(t,e)||h(e,t)},H=h):(D=function(e,t){e[I]||(e[I]=S(!0),h(e,t))},H=D),Ne?(Ke=!1,function(){var e=de(He,j),t=e.value,n=function(e){var t=new CustomEvent(W,{bubbles:!0});t.attrName=e,t.prevValue=Fe.call(this,e),t.newValue=null,t[$]=t.attrChange=2,Je.call(this,e),Re.call(this,t)},o=function(e,t){var n=Ve.call(this,e),o=n&&Fe.call(this,e),r=new CustomEvent(W,{bubbles:!0});Ue.call(this,e,t),r.attrName=e,r.prevValue=n?o:null,r.newValue=t,n?r[Z]=r.attrChange=1:r[X]=r.attrChange=0,Re.call(this,r)},r=function(e){var t,n=e.currentTarget,o=n[I],r=e.propertyName;o.hasOwnProperty(r)&&(o=o[r],t=new CustomEvent(W,{bubbles:!0}),t.attrName=o.name,t.prevValue=o.value||null,t.newValue=o.value=n[r]||null,null==t.prevValue?t[X]=t.attrChange=0:t[Z]=t.attrChange=1,Re.call(n,t))};e.value=function(e,i,a){e===W&&this[F]&&this.setAttribute!==o&&(this[I]={className:{name:"class",value:this.className}},this.setAttribute=o,this.removeAttribute=n,t.call(this,"propertychange",r)),t.call(this,e,i,a)},fe(He,j,e)}()):De||(ae[j](W,Ze),ae.setAttribute(I,1),ae.removeAttribute(I),Ke&&(w=function(e){var t,n,o,r=this;if(r===e.target){t=r[I],r[I]=n=_(r);for(o in n){if(!(o in t))return P(0,r,o,t[o],n[o],X);if(n[o]!==t[o])return P(1,r,o,t[o],n[o],Z)}for(o in t)if(!(o in n))return P(2,r,o,t[o],n[o],$)}},P=function(e,t,n,o,r,i){var a={attrChange:e,currentTarget:t,attrName:n,prevValue:o,newValue:r};a[i]=e,l(a)},_=function(e){for(var t,n,o={},r=e.attributes,i=0,a=r.length;i<a;i++)t=r[i],n=t.name,"setAttribute"!==n&&(o[n]=t.value);return o})),M[N]=function(e,t){if(n=e.toUpperCase(),We||(We=!0,De?(L=function(e,t){function n(e,t){for(var n=0,o=e.length;n<o;t(e[n++]));}return new De(function(o){for(var r,i,a,s=0,l=o.length;s<l;s++)r=o[s],"childList"===r.type?(n(r.addedNodes,e),n(r.removedNodes,t)):(i=r.target,Ye&&i[F]&&"style"!==r.attributeName&&(a=Fe.call(i,r.attributeName),a!==r.oldValue&&i[F](r.attributeName,r.oldValue,a)))})}(i(A),i(q)),x=function(e){return L.observe(e,{childList:!0,subtree:!0}),e},x(M),Ge&&(He.attachShadow=function(){return x(Ge.apply(this,arguments))})):(O=[],M[j]("DOMNodeInserted",c(A)),M[j]("DOMNodeRemoved",c(q))),M[j](K,u),M[j]("readystatechange",u),He.cloneNode=function(e){var t=qe.call(this,!!e),n=a(t);return-1<n&&H(t,re[n]),e&&r(t.querySelectorAll(ie)),t}),-2<se.call(oe,ee+n)+se.call(oe,Y+n)&&p(e),!te.test(n)||-1<se.call(ne,n))throw new Error("The type "+e+" is invalid");var n,s,l=function(){return h?M.createElement(d,n):M.createElement(d)},f=t||le,h=ce.call(f,R),d=h?t[R].toUpperCase():n;return h&&-1<se.call(oe,Y+d)&&p(d),s=oe.push((h?ee:Y)+n)-1,ie=ie.concat(ie.length?",":"",h?d+'[is="'+e.toLowerCase()+'"]':d),l.prototype=re[s]=ce.call(f,"prototype")?f.prototype:Le(He),o(M.querySelectorAll(ie),A),l},M.createElement=Be=function(e,t){var n=y(t),o=n?ze.call(M,e,_e(n)):ze.call(M,e),r=""+e,i=se.call(oe,(n?ee:Y)+(n||r).toUpperCase()),a=-1<i;return n&&(o.setAttribute("is",n=n.toLowerCase()),a&&(a=s(r.toUpperCase(),n))),Ye=!M.createElement.innerHTMLHelper,a&&H(o,re[i]),o}),v.prototype={constructor:v,define:Ce?function(e,t,n){if(n)g(e,t,n);else{var o=e.toUpperCase();Oe[o]={constructor:t,create:[o]},Pe.set(t,o),Ee.define(e,t)}}:g,get:Ce?function(e){return Ee.get(e)||b(e)}:b,whenDefined:Ce?function(e){return Se.race([Ee.whenDefined(e),C(e)])}:C},Ee&&"force"!==t)try{!function(t,n,o){if(n[R]="a",t.prototype=Le(HTMLAnchorElement.prototype),t.prototype.constructor=t,e.customElements.define(o,t,n),Fe.call(M.createElement("a",{is:o}),"is")!==o||Ce&&Fe.call(new t,"is")!==o)throw n}(function e(){return Reflect.construct(HTMLAnchorElement,[],e)},{},"document-register-element-a")}catch(e){T()}else T();try{ze.call(M,"a","a")}catch(e){_e=function(e){return{is:e}}}}e.exports=n,n(t)}).call(t,function(){return this}())}])});
//# sourceMappingURL=sepcon.min.js.map