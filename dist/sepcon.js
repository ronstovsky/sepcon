/*!
 *    < SepCon />.JS    Wed Mar 15 2017 21:23:19 GMT+0200 (IST)
 * Derived from the separation of concerns (SoC) design principle,
 * influenced by Flux and MVVM architectures.
 * 
 * Contributed by Ron Rostovsky
 */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="./",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SepCon=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(12),l=o(s),c=(n(2),n(1)),u=(o(c),function(){function e(t){r(this,e),t&&(this.hash=t.hash),this.root=new l.default(this,t),this.classes=this.root.classes,this.setConfiguration=this.root.setConfiguration.bind(this.root),this.modify=this.root.executeModifier.bind(this.root)}return a(e,[{key:"createData",value:function(e,t,n){if("object"===("undefined"==typeof e?"undefined":i(e))){var o=e;e=o.id,n=o.data,t=o.extend}else"object"===("undefined"==typeof t?"undefined":i(t))&&(n=t,t=null);return this.root.datas[e]?(console.error('The data id "'+e+'" already exists'),!1):("string"==typeof t&&(t=this.root.datas[t].definition),this.root.datas[e]=new this.root.classes.Data(n,t,this.root),this.root.datas[e])}},{key:"createModifier",value:function(e,t,n){if("object"===("undefined"==typeof e?"undefined":i(e))){var o=e;e=o.id,n=o.modifier,t=o.extend}else"object"===("undefined"==typeof t?"undefined":i(t))&&(n=t,t=null);return this.root.modifiers[e]?(console.error('The modifier id "'+e+'" already exists'),!1):("string"==typeof t&&(t=this.root.modifiers[t].definition),this.root.modifiers[e]=new this.root.classes.Modifier(n,t,this.root),this.root.modifiers[e])}},{key:"createComponent",value:function(e,t,n){var o=this;if("object"===("undefined"==typeof e?"undefined":i(e))){var r=e;n=r.component,e=r.id,t=r.extend}else"object"===("undefined"==typeof t?"undefined":i(t))&&(n=t,t=null);return this.root.components[e]?console.error('The component id "'+e+'" already exists'):("string"==typeof t&&(t=this.root.components[t].definition),this.root.components[e]=new this.root.classes.ComponentDefinition(e,n,t,this.root)),{createTag:function(){return o.createTag(e)}}}},{key:"createTag",value:function(e){return new this.root.classes.ComponentTag(this,e)}}]),e}()),f=function(){var e=new u;return e.createScope=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.hash=parseInt(1e3*Date.now()+Math.round(1e3*Math.random())).toString(36),new u(e)},e}();t.SepCon=f,t.default=f},function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(var i in t)if("object"===s(e[i])&&"object"===s(t[i])){var a=JSON.stringify(e[i])!=JSON.stringify(t[i]);if(a){var l={};l[i]=[],n[i]=r(e[i],t[i],l,i)}}else e[i]!=t[i]&&n[o].push(i);return n}function i(e,t,n){return o({},e,{oldValue:"undefined"!=typeof t?JSON.parse(JSON.stringify(t)):null,newValue:"undefined"!=typeof n?JSON.parse(JSON.stringify(n)):null})}function a(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];for(var l in n)if(Object.assign(r,i(o?o:l,e[l],t[l])),o+=l,n[l]instanceof Array)for(var c=0,u=n[l].length;c<u;c++)Object.assign(r,i(o+"."+n[l][c],e[l][n[l][c]],t[l]&&t[l][n[l][c]]?t[l][n[l][c]]:null));else"object"===s(n[l])&&a(e,t,n[l],o,r);return r}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(2);t.default={clone:function(e,t){if(null===e||"object"!=("undefined"==typeof e?"undefined":s(e)))return e;if(e.constructor!=Object&&e.constructor!=Array)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e.constructor(e);t=t||new e.constructor;for(var n in e)t[n]="undefined"==typeof t[n]?this.clone(e[n],null):t[n];return t},extend:function(e,t){var n=this.clone(e);for(var o in t)e.hasOwnProperty(o)&&"object"===s(e[o])?n[o]=this.extend(e[o],t[o]):n[o]=t[o];return n},hookString:function(e,t){return(e?e+":":"")+t},setChanges:function(e,t,n,o){var l={};for(var c in t){var u=!1,f="object"===s(e[c])&&null!==e[c],h="object"===s(t[c])&&null!==t[c];if(f||h){var p={};p[c]=[];var d=r(e[c],t[c],p,c);if(u=Object.keys(d[c]).length>0){if(o){var m=t[c]?JSON.parse(JSON.stringify(t[c])):t[c],v=e[c]?JSON.parse(JSON.stringify(e[c])):e[c];Object.assign(l,i(c,v,m))}else Object.assign(l,a(e,t,d));n&&(e[c]=JSON.parse(JSON.stringify(t[c])))}}else if(e[c]!=t[c]){var g=t[c]?JSON.parse(JSON.stringify(t[c])):t[c],b=e[c]?JSON.parse(JSON.stringify(e[c])):e[c];Object.assign(l,i(c,b,g)),n&&(e[c]=g)}}return l},formatValueForValidJSON:function(e){if(0===e)return 0;if(void 0===e)return null;if("object"===("undefined"==typeof e?"undefined":s(e)))if(e instanceof Array)for(var t=0,n=e.length;t<n;t++)e[t]=this.formatValueForValidJSON(e[t]);else for(var o in e)e[o]=this.formatValueForValidJSON(e[o]);return e},isInDome:function(e){for(var t=e.parentNode;t&&"body"!=t.tagName.toLowerCase();)t=t.parentNode;return!!t},isDeepNestedInSameComponent:function(e){for(var t=this.getComponentElementsPath(e,!0,!0),n=0,o=t.length-1;n<o;n++)if(t[n]===e.tagName)return!0;return!1},getParentComponentElement:function(e){var t=e,n=void 0;do{if(n=t.parentNode,!n)break;if(n._componentElement||0===n.tagName.toLowerCase().indexOf(l.TAG_PREFIX))return n;t=n}while("body"!=n.tagName.toLowerCase());return!1},getComponentElementNameForPath:function(e){var t=e.getAttribute(l.TAG_IDENTIFIER)||null;if(!t){var n=this.getComponentElementSiblings(e),o=this.getComponentElementIndex(e,n);t="("+o+")"}return e.tagName+" "+t},getComponentElementsPath:function(e,t,n){var o=e,r=void 0,i=[];do r=this.getParentComponentElement(o),!t&&r.tagName?i.push(this.getComponentElementNameForPath(r)):r.tagName&&i.push(r.tagName),o=r;while(r);return i.reverse(),t?i.push(e.tagName):i.push(this.getComponentElementNameForPath(e)),n?i:i.join(">")},getComponentElementSiblings:function(e){var t=this,n=this.getParentComponentElement(e),o=n?Array.from(n.getElementsByTagName(e.tagName)):[];return o.length>1&&(o=o.filter(function(e){return!(!e._componentElement||e._componentElement.parent!==n)||t.getParentComponentElement(e)===n})),o},getComponentElementIndex:function(e,t){for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return 0},getComponent:function(e,t){if(t.component&&t.component.mapItem)return t.component.mapItem;for(var n=t._componentElement.path,o=0,r=e.length;o<r;o++){var i=e[o];if(i&&(i.element===t||i.path===n))return t.component=i.element.component,i.setElement(t),i}return!1},getLooseComponent:function(e,t){var n=t.tagName,o=t.getAttribute(l.TAG_IDENTIFIER),r=e.filter(function(e){return e&&e.tag===n}),i=null;return r.forEach(function(e){if(!i){var t=e.id===o,r=e.tag===n;r&&t&&(i=e)}}),o||(i=this.getComponent(r,t)),i}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TAG_PREFIX="x-sepcon-",t.TAG_PROPERTIES="data-properties",t.TAG_METHODS="data-methods",t.TAG_IDENTIFIER="data-identifier",t.ADD_COMPONENT_DEFINITION="add-component-definition",t.ADD_COMPONENT="add-component",t.DATA_CHANGED="data-changed",t.DATA_CHANGES_AFFECTING="data-changes-affecting"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new Map,o={},r={add:function(e){if(n.has(e))return n.get(e);var t=parseInt(1e3*Date.now()+Math.round(1e3*Math.random())).toString(36);return n.set(e,t),o[t]=e,t},get:function(e){return void 0!==o[e]?o[e]:null}};t.default=r},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),s=o(a),l=function(){function e(t,n){r(this,e),this.base=t,this.config=n}return i(e,[{key:"startSequence",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mount",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.params=n,this.sequence=t,this.seq=this.config[t];var o=Promise;this.handleSequenceStep("pre")&&o.resolve().then(function(){e.handleSequenceStep(!1)&&window.requestAnimationFrame(function(){e.handleSequenceStep("post")})})}},{key:"handleSequenceStep",value:function(e){for(var t=0,n=this.seq.sequence.length;t<n;t++){var o=this.seq.sequence[t],r=this.getStepParams(o,e),i=void 0;switch(o.target){case"component":case"modifier":i=this.base.scoped;break;case"state":i=this.base.state.scoped}var a=s.default.hookString(e,o.action);if(i[a]){var l=i[a].apply(i,r);if(l===!1)return!1;this.handleStepResponse(o,e,l)}}return!0}},{key:"getStepParams",value:function(e,t){return this.seq.send?this.seq.send.apply(this,[e,t]):this.params}},{key:"handleStepResponse",value:function(e,t,n){return this.seq.retrieve?this.seq.retrieve.apply(this,[e,t,n]):n}}]),e}();t.default=l},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(1),c=o(l);n(16);var u=n(2),f=function(){function e(t,n,o,r){return a(this,e),o&&(n=c.default.extend(o,n),n.super=o,n.state.super=o.state),this.root=r,this.tag=u.TAG_PREFIX+(this.root.hash?this.root.hash+"-":"")+t,this.definition=n,this.root.addComponentDefinition(this),this.registerElement(),this}return s(e,[{key:"registerElement",value:function(){var e=this,t=this.root;if("function"!=typeof HTMLElement){var n=function(){};n.prototype=HTMLElement.prototype,HTMLElement=n}var o=function(n){function o(){return a(this,o),r(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return i(o,n),s(o,[{key:"connectedCallback",value:function(){for(var n=this,o=this.children,r=o.length,i=r-1>>0,a=[];r--;)a[i--]=o[r];this.originalChildren=a,this.originalInnerHTML=this.innerHTML,this.innerHTML="",Promise.resolve().then(function(){if(!c.default.isInDome(n))return!1;if(c.default.isDeepNestedInSameComponent(n))return console.error("components cannot be nested inside themselved",c.default.getComponentElementsPath(n,!0,!0),n),!1;var o=c.default.getParentComponentElement(n);if(n._componentElement={isInitialized:!1,path:c.default.getComponentElementsPath(n),init:function(){if(!c.default.isInDome(n))return void(n.component=!1);var r=!1;if(!n.component&&o){r=c.default.getComponent(t.componentElements,o);var i=!!r&&c.default.getLooseComponent(r.children,n);i&&(n.component=i.component)}n.component?n.component.resume(n):(n.component=new t.classes.Component(e.definition,t,n,r,o),n.component.initialize()),n._componentElement.isInitialized=!0}},o){var r=o._componentElement,i=!!r&&r.isInitialized;r&&i&&n._componentElement.init()}else n._componentElement.init();t.componentElementAdded(n)})}},{key:"disconnectedCallback",value:function(){this.component&&this.component.onDestroy()}},{key:"attributeChangedCallback",value:function(){}}]),o}(HTMLElement);customElements.define(this.tag,o)}}]),e}();t.default=f},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),s=o(a),l=n(2),c=function(){function e(t,n,o,i,a){r(this,e),this.active=!1,this._eventsCallbacks={},this.scoped=s.default.clone(t),this.scoped.html=o.originalInnerHTML,this.scoped.children=o.originalChildren,this.scoped.element=o,this.scoped.id=o.getAttribute(l.TAG_IDENTIFIER),delete this.scoped.state,this.scoped.super&&delete this.scoped.super.state,this.parent=i,this.state=new n.classes.ComponentState(t.state,this,n),this.sequencer=new n.classes.Sequencer(this,n.sequencerConfig),this.mapItem=n.addComponent(this,o,a)}return i(e,[{key:"bindEvents",value:function(){var e=this;this.scoped.events&&(this.scoped.isInitiatedEvents&&this.unbindEvents(),this.scoped.events.forEach(function(t){var n=t.selector?e.scoped.element.querySelector(t.selector):e.scoped.element;e._eventsCallbacks[t.selector+":"+t.event+":"+t.callback]=e.scoped[t.callback].bind(e.scoped),n.addEventListener(t.event,e._eventsCallbacks[t.selector+":"+t.event+":"+t.callback],!1)}),this.scoped.isInitiatedEvents=!0)}},{key:"unbindEvents",value:function(){var e=this;this.scoped.events&&this.scoped.isInitiatedEvents&&(this.scoped.events.forEach(function(t){var n=t.selector?e.scoped.element.querySelector(t.selector):e.scoped.element;n.removeEventListener(t.event,e._eventsCallbacks[t.selector+":"+t.event+":"+t.callback],!1)}),this.scoped.isInitiatedEvents=!1)}},{key:"initialize",value:function(e){this.active=!0,this.setStateData(),this.sequencer.startSequence("mount")}},{key:"resume",value:function(e){if(this.active=!0,this.unbindEvents(),this.scoped.element=e,!this.currentHtml)return void this.initialize();this.setStateData(),this.updateState();var t=this.scoped.html!=this.scoped.element.originalInnerHTML;this.scoped.html=this.scoped.element.originalInnerHTML,this.scoped.children=this.scoped.element.originalChildren,this.scoped.element.innerHTML=this.currentHtml,this.bindEvents(),this.state.addRoutes();var n=s.default.setChanges(this.componentPrevProps,this.scoped.props);(Object.keys(n).length>0||t)&&this.sequencer.startSequence("externalChange",n)}},{key:"updateState",value:function(){this.scoped.props=this.state.getProps(),this.scoped.methods=this.state.getMethods()}},{key:"setStateData",value:function(){this.state.setExternals(),this.state.updateReferencedProps(),this.state.updateGlobalProps(),this.mapItem.updateAfterComponentInit()}},{key:"onStateChange",value:function(e){this.sequencer.startSequence("localChange",e)}},{key:"onReferenceChange",value:function(e){var t=this.state.getReferenceStatePropNames(e);this.sequencer.startSequence("referenceChange",t)}},{key:"onGlobalStateChange",value:function(e){var t=this.state.getGlobalStatePropNames(e);this.sequencer.startSequence("globalChange",t)}},{key:"onRender",value:function(e){e!=this.currentHtml&&(this.scoped.element.innerHTML=this.currentHtml=e,this.bindEvents())}},{key:"onDestroy",value:function(){this.active=!1,this.state.removeRoutes(),this.unbindEvents(),this.componentPrevProps=s.default.clone(this.scoped.props),this.sequencer.startSequence("destroy")}}]),e}();t.default=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){var t={};if(!e)return t;for(var n in e){var o=e[n],r=o.data,i=o.key;t[r]=i}return t}function i(e,t,n){if(e&&e[t])for(var o=0,r=n.length;o<r;o++){if(e[t]===n[o])return!0;if(e[t]&&n[o].indexOf(".")>0){var i=n[o];do if(i=i.substr(0,i.lastIndexOf(".")),0===i.indexOf(e[t]))return!0;while(i.indexOf(".")>-1)}}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentDefinitionItem=t.ComponentItem=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(2),l=function(){function e(t,n){o(this,e),this.children=[],this.parent=null,this.definition=null,this.component=t,this.setElement(n),this.extractElementData()}return a(e,[{key:"setParent",value:function(e){this.parent=e}},{key:"addChild",value:function(e){this.children.push(e)}},{key:"setDefinition",value:function(e){this.definition=e}},{key:"setElement",value:function(e){this.element=e,this.id=e.getAttribute(s.TAG_IDENTIFIER),this.tag=e.tagName,this.path=e._componentElement.path,e.component&&(this.component=e.component),this.extractElementData()}},{key:"extractElementData",value:function(){this.external={props:null,methods:null,html:this.element.originalInnerHTML,children:this.element.originalChildren};var e=this.element.getAttribute(s.TAG_PROPERTIES),t=this.element.getAttribute(s.TAG_METHODS);this.external.props=e?JSON.parse(e):null,this.external.methods=t?JSON.parse(t):null}},{key:"updateAfterComponentInit",value:function(){this.global=r(this.component.state.reference.global)}},{key:"checkChanged",value:function(e,t){return this.changed=!1,this.definition.changed?this.changed=!0:Object.keys(this.global).length>0&&(this.changed=i(this.global,e,t)),this.changed}}]),e}(),c=function(){function e(t){o(this,e),this.definition=t,t.state&&t.state.props&&t.state.props.global&&(this.global=r(t.state.props.global))}return a(e,[{key:"checkChanged",value:function(e,t){return this.changed=i(this.global,e,t),this.changed}}]),e}();t.ComponentItem=l,t.ComponentDefinitionItem=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(1),l=o(s),c=n(4),u=(o(c),n(3)),f=o(u),h=(n(2),{local:{},external:{},global:{}}),p=function(e){var t={methods:{},props:{}},n=Object.assign({},t,e);return n.methods=Object.assign({},h,n.methods),n.props=Object.assign({},h,n.props),n},d=function(e,t){var n={};if(!e)return{};for(var o in e){var r=e[o].data,i=e[o].key;t.datas[r]?n[o]=t.datas[r].getProp(i):console.warn("no such data as "+r+" defined")}return JSON.parse(JSON.stringify(n))},m=function(e,t,n){var o=[],r=!1;switch(t){case"global":e.global[n]&&o.push(e.global[n]);case"external":e.external[n]&&o.push(e.external[n]);case"local":e.local[n]&&(r=!0,o.push(e.local[n]))}var i=function(){function e(){for(i=[].slice.call(arguments);t.length>0;)t.pop().apply(n,i)}var t=Object.assign([],o),n=this,i=[].slice.call(arguments),a=void 0;if(r)a=t.pop().apply(n,[e].concat(i));else for(;t.length>0;)t.pop().apply(n,i);return a};return i},v=function(e,t){var n=function(n){e.bindings[n]&&e.bindings[n].forEach(function(e){e.component.onReferenceChange(i({},n,t[n]))})};for(var o in t)n(o)},g=function(){function e(t,n,o){var i=this;r(this,e),this.root=o,this.definition=l.default.clone(p(t)),this.scoped=l.default.clone(this.definition);for(var a in this.scoped.methods.local)this.scoped.methods.local[a].bind(this.scoped);for(var s in this.scoped.methods.external)this.scoped.methods.external[s].bind(this.scoped);var c=function(e){i.scoped.methods.global[e]=function(){var t=[].slice.call(arguments),n=[this.definition.methods.global[e].modifier,this.definition.methods.global[e].key];if(this.definition.methods.global[e].pass){var o=this.definition.methods.global[e].pass.apply(this.scoped,t);n=n.concat(o),this.root.executeModifier.apply(this.root,n)}else n=n.concat(t),this.root.executeModifier.apply(this.root,n)}.bind(i)};for(var u in this.definition.methods.global)c(u);this.scoped.setProps=function(e,t){var n=l.default.setChanges(i.scoped.props.local,e,t,!0);return t?void i.updateLocalProps(n):void(Object.keys(n).length>0&&i.component.onStateChange(n))},this.scoped.router=this.root.router,this.scoped.execute=this.root.executeModifier.bind(this.root),this.scoped.id=n.scoped.id,this.component=n,this.reference=Object.assign({},h),this.bindings={}}return a(e,[{key:"getProps",value:function(){var e=l.default.clone(this.scoped.props),t=Object.assign({},e.local,e.external,e.global);return t}},{key:"getMethods",value:function(){var e=l.default.clone(this.scoped.methods),t={};for(var n in e.global)t[n]=m(e,"global",n).bind(this.scoped);for(var o in e.external)t[o]||(t[o]=m(e,"external",o).bind(this.scoped));for(var r in e.local)t[r]||(t[r]=m(e,"local",r).bind(this.scoped));return t}},{key:"getGlobalDef",value:function(){var e={};return this.definition.props.global&&Object.assign(e,this.definition.props.global),this.reference.global&&Object.assign(e,this.reference.global),Object.keys(e).length>0?JSON.parse(JSON.stringify(e)):null}},{key:"getGlobalStatePropName",value:function(e){var t=this.getGlobalDef();for(var n in t)if(t[n].key===e)return n}},{key:"getGlobalStatePropNames",value:function(e){var t={};for(var n in e){var o=this.getGlobalStatePropName(n);void 0!==o&&(t[o]=e[n])}return t}},{key:"getReferenceStatePropName",value:function(e){for(var t in this.reference.global)if(this.reference.global[t].key===e)return t;for(var n in this.reference.external)if(this.reference.external[n].key===e)return n;for(var o in this.reference.local)if(this.reference.local[o].key===e)return o}},{key:"getReferenceStatePropNames",value:function(e){var t={};for(var n in e){var o=this.getReferenceStatePropName(n);void 0!==o&&(t[o]=e[n])}return t}},{key:"updateLocalProps",value:function(e){for(var t in e)this.scoped.props.local[t]=e[t].newValue,v(this,e)}},{key:"updateReferencedProps",value:function(){var e=this;if(this.reference.parent){var t={global:{},external:{},local:{}};t.global=d(this.reference.global,this.root);for(var n in this.reference.external){var o=this.reference.external[n].key;t.external[n]=this.reference.parent.props.external[o]}var r=function(n){var o=function e(t,n){if(!t)return null;if(!t.reference.local[n])return t.scoped.props.local[n]?t.scoped.props.local[n]:e(t.reference.parent,n);var o=t.reference.local[n].key;return t.reference.parent.scoped.props.local[o]?t.reference.parent.scoped.props.local[o]:e(t.reference.parent,o)};t.local[n]=o(e,n)};for(var i in this.reference.local)r(i);var a=Object.assign({},t.local,t.external,t.global);Object.assign(this.scoped.props.external,a)}}},{key:"updateGlobalProps",value:function(){this.scoped.props.global=d(this.definition.props.global,this.root),this.reference.parent&&Object.assign(this.scoped.props.external,d(this.reference.global,this.root))}},{key:"setExternals",value:function(){if(this.component.mapItem.external.props||this.component.mapItem.external.methods){var e=this.component.parent?this.component.parent.component:null,t=e?e.state:null;this.component.mapItem.external.props&&this.setExternalProperties(this.component.mapItem.external.props,t),this.component.mapItem.external.methods&&this.setExternalMethods(this.component.mapItem.external.methods,e,t)}this.component.mapItem.external.html&&(this.scoped.html=this.component.mapItem.external.html),this.component.mapItem.external.children&&(this.scoped.children=this.component.mapItem.external.children)}},{key:"setExternalProperties",value:function(e,t){var n={},o={global:{},external:{},local:{},parent:t};for(var r in e){var i=e[r];i.reference?this.setExternalReferencedProperty({name:r,value:e[r].reference},o,t):this.setExternalProperty({name:r,value:e[r].value},n)}this.scoped.props.external=n,this.reference=o}},{key:"setExternalProperty",value:function(e,t){t[e.name]=f.default.get(e.value)}},{key:"setExternalReferencedProperty",value:function(e,t,n){var o=this,r=e.name,i=e.value.split("."),a=i[0];i.shift(),i=i.join("."),t.parent.reference.global.hasOwnProperty(a)?t.global[r]=t.parent.reference.global[e.value]:t.parent.reference.external.hasOwnProperty(a)?t.external[r]=t.parent.reference.external[e.value]:t.parent.reference.local.hasOwnProperty(a)?!function(){t.local[r]=t.parent.reference.local[e.value];var n=function e(t,n){if(!t)return null;if(t.reference.local[n]){var r=t.reference.local[n].key;t.reference.parent.scoped.props.local[r]?t.reference.parent.bind(r,o):e(t.reference.parent,r)}else t.scoped.props.local[n]?t.bind(n,o):e(t.reference.parent,n)};n(t.parent,a)}():t.parent.scoped.props.global.hasOwnProperty(a)?(t.global[r]=n.getGlobalDef()[a],t.global[r].key+="."+i):t.parent.scoped.props.external.hasOwnProperty(a)?t.external[r]={key:e.value}:(t.local[r]={key:e.value},n.bind(a,this))}},{key:"setExternalMethods",value:function(e,t,n){var o={};for(var r in e){var i=e[r];i.reference?this.setExternalReferenceMethod({name:r,value:e[r]},o,t,n):this.setExternalMethod({name:r,value:e[r].value},o)}this.scoped.methods.external=Object.assign({},this.definition.methods.external,o)}},{key:"setExternalMethod",value:function(e,t){t[e.name]=f.default.get(e.value)}},{key:"setExternalReferenceMethod",value:function(e,t,n,o){var r=o.getMethods(),i=e.value;if(r[i.reference]){var a=e.name;t[a]=function(){r[i.reference].apply(n,arguments)}}}},{key:"bind",value:function(e,t){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(t)}},{key:"addRoutes",value:function(){var e=this;this.definition.routes&&this.definition.routes.forEach(function(t){return e.root.router.add(t,e.scoped)})}},{key:"removeRoutes",value:function(){this.definition.routes&&this.root.router.remove(this.scoped)}}]),e}();t.default=g},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(3),s=o(a),l=n(2),c=function(){function e(t,n){r(this,e),this._app=t,this._tag=n,this._methods={},this._props={},this._id=null,this._html=null}return i(e,[{key:"methods",value:function(e){var t={};for(var n in e){var o=e[n];t[n]={value:s.default.add(o)}}return Object.assign(this._methods,t),this}},{key:"refMethods",value:function(e){var t={};for(var n in e){var o=e[n];t[n]={reference:o}}return Object.assign(this._methods,t),this}},{key:"props",value:function(e){var t={};for(var n in e){var o=e[n];t[n]={value:s.default.add(o)}}return Object.assign(this._props,t),this}},{key:"refProps",value:function(e){var t={};for(var n in e){var o=e[n];t[n]={reference:o}}return Object.assign(this._props,t),this}},{key:"id",value:function(e){return this._id=e,this}},{key:"render",value:function(e){var t="";if(!e||"open"===e){var n=[];n.push(""+l.TAG_PREFIX+(this._app.hash?this._app.hash+"-":"")+this._tag),Object.keys(this._props).length>0&&n.push(l.TAG_PROPERTIES+"='"+JSON.stringify(this._props)+"'"),Object.keys(this._methods).length>0&&n.push(l.TAG_METHODS+"='"+JSON.stringify(this._methods)+"'"),this._id&&n.push(l.TAG_IDENTIFIER+'="'+this._id+'"'),t="<"+n.join(" ")+">"}return e||this._html&&(t+=this._html),e&&"close"!==e||(t+="</"+l.TAG_PREFIX+(this._app.hash?this._app.hash+"-":"")+this._tag+">"),t}}]),e}();t.default=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(1),l=o(s),c=function(){function e(t,n,o){r(this,e),n&&(t=l.default.extend(n,t)),this.definition=t,this.data=t}return a(e,[{key:"setProps",value:function(e){return e=l.default.formatValueForValidJSON(e),l.default.setChanges(this.data,e,!0)}},{key:"getProps",value:function(e){for(var t={},n=0,o=e.length;n<o;n++)t[e[n]]="object"===i(e[n])?this.getProp(e[n].key,e[n].index):this.getProp(e[n]);return t}},{key:"getProp",value:function(e){for(var t=e.split("."),n=this.data,o=0,r=t.length;o<r;o++)n=n[t[o]];switch("undefined"==typeof n?"undefined":i(n)){case"string":case"number":return n}return JSON.parse(JSON.stringify(n))}}]),e}();t.default=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),s=o(a),l=function(){function e(t,n,o){var i=this;r(this,e),n&&(t=s.default.extend(n,t),t.super=n),this.definition=t,this.root=o,this.scoped=s.default.clone(t),this.debounced={};for(var a in this.scoped.methods)this.scoped.methods[a]=this.scoped.methods[a].bind(this.scoped);this.scoped.setProps=function(e,t){i.root.changedData(e,i.root.datas[e].setProps(t))},this.scoped.getProp=function(e,t){return i.root.datas[e].getProp(t)},this.scoped.getProps=function(e,t){return i.root.datas[e].getProps(t)},this.scoped.router=this.root.router,this.sequencer=new o.classes.Sequencer(this,o.sequencerConfig),this.sequencer.startSequence("mountModifier")}return i(e,[{key:"stack",value:function(e,t){this.debounced[e]=t}},{key:"execute",value:function(){for(var e in this.debounced)this.scoped.methods[e].apply(this.scoped,this.debounced[e]);this.debounced={}}},{key:"has",value:function(e){return!!this.scoped.methods[e]}},{key:"addRoutes",value:function(){var e=this;this.definition.routes&&this.definition.routes.forEach(function(t){return e.root.router.add(t,e.scoped)})}}]),e}();t.default=l},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),
Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(5),s=o(a),l=n(6),c=o(l),u=n(8),f=o(u),h=n(11),p=o(h),d=n(10),m=o(d),v=n(9),g=o(v),b=n(4),y=o(b),E=n(14),T=o(E),M=n(1),C=o(M),O=n(7),k=(n(2),n(15)),S=o(k),L=n(13),_=o(L),w=new T.default,P=function(){function e(t,n){r(this,e),this.classes={ComponentDefinition:s.default,Component:c.default,ComponentState:f.default,Modifier:p.default,Data:m.default,ComponentTag:g.default,Sequencer:y.default},this.components=[],this.componentsDefinition=[],this.componentElements=[],this.router=w,this.datas={},this.modifiers={},this.modifiers={},t.hash&&(this.hash=t.hash),this.sequencerConfig=C.default.clone(S.default),this.routerConfig=C.default.clone(_.default),this.setConfiguration(n),this.router.config(this.routerConfig),this.router.listen()}return i(e,[{key:"setConfiguration",value:function(e){e&&(e.sequencer&&(this.sequencerConfig=Object.assign(this.sequencerConfig,e.sequencer)),e.router&&(this.routerConfig=Object.assign(this.routerConfig,e.router),this.router.config(this.routerConfig)))}},{key:"executeModifier",value:function(e,t){var n=this,o=[].slice.call(arguments),r=o.slice(2);this.modifiers[e]&&this.modifiers[e].has(t)&&this.modifiers[e].stack(t,r),Promise.resolve().then(function(){for(var e in n.modifiers)n.modifiers[e].execute()})}},{key:"changedData",value:function(e,t){if(0!==Object.keys(t).length){for(var n in this.componentsDefinition)this.componentsDefinition[n].checkChanged(e,Object.keys(t));this.componentElements.forEach(function(n){n.element.component.active&&n.checkChanged(e,Object.keys(t))&&n.element.component.onGlobalStateChange(t)})}}},{key:"addComponentDefinition",value:function(e){this.componentsDefinition[e.tag]=new O.ComponentDefinitionItem(e.definition)}},{key:"componentElementAdded",value:function(){this.componentElements.forEach(function(e){e.element._componentElement.isInitialized||(null===e.parent?e.element._componentElement.init():e.parent._componentElement&&e.parent._componentElement.isInitialized&&e.element._componentElement.init())})}},{key:"addComponent",value:function(e,t,n){var o=new O.ComponentItem(e,t);return this.componentElements.push(o),this.componentElements.forEach(function(e){null===o.parent&&e.element===n&&o.setParent(e)}),null!==o.parent&&o.parent.addChild(o),o.setDefinition(this.componentsDefinition[o.tag.toLowerCase()]),o}}]),e}();t.default=P},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mode:"history",root:"/"}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(t){n(this,e),this.routes=[],t&&this.config(t)}return o(e,[{key:"config",value:function(e){return e.mode&&"history"===e.mode&&history.pushState?this.mode="history":this.mode="hash",e.root?this.root=this.clearSlashes(e.root)+"/":this.root="/",this}},{key:"getFragment",value:function(){var e="";if("history"===this.mode)e=this.clearSlashes(decodeURI(location.pathname+location.search)),e=e.replace(/\?(.*)$/,""),e="/"!=this.root?e.replace(this.root,""):e;else{var t=window.location.href.match(/#(.*)$/);e=t?t[1]:""}return this.clearSlashes(e)}},{key:"clearSlashes",value:function(e){return e.toString().replace(/\/$/,"").replace(/^\//,"")}},{key:"add",value:function(e,t){e.state=t,this.routes.push(e);var n=this.check(null,e);return this.executeHandlers(n),this}},{key:"remove",value:function(e){for(var t=0;t<this.routes.length;t++){var n=this.routes[t];if(n.state===e)return this.routes.splice(t,1),this}return this}},{key:"flush",value:function(){return this.routes=[],this.mode=null,this.root="/",this}},{key:"check",value:function(e,t){function n(e){var t=o.match(e.match);if(t)return!0}var o=e||this.getFragment(),r=[];if(t)n(t)&&r.push(t);else for(var i=0;i<this.routes.length;i++)n(this.routes[i])&&r.push(this.routes[i]);return r}},{key:"executeHandlers",value:function(e){if(0!==e.length)for(var t=0,n=e.length;t<n;t++)e[t].handler.call(e[t].state)}},{key:"listen",value:function(){var e=this,t=e.getFragment(),n=function(){if(t!==e.getFragment()){t=e.getFragment();var n=e.check(t);e.executeHandlers(n)}};return clearInterval(this.interval),this.interval=setInterval(n,50),this}},{key:"navigate",value:function(e){return e=e?e:"","history"===this.mode?history.pushState(null,null,this.root+this.clearSlashes(e)):window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+e,this}}]),e}();t.default=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mount:{send:function(e,t){return"state"===e.target?"pre"===t&&this.base.state.addRoutes():this.base.updateState(),[this.params]},retrieve:function(e,t,n){"component"===e.target&&n&&"string"==typeof n&&this.base.onRender(n)},sequence:[{target:"state",action:"mount"},{target:"component",action:"render"}]},localChange:{send:function(e,t){return"state"===e.target?t===!1&&(this.base.state.updateLocalProps(this.params),this.base.updateState()):this.base.updateState(),[this.params]},retrieve:function(e,t,n){"component"===e.target&&n&&"string"==typeof n&&this.base.onRender(n)},sequence:[{target:"state",action:"change"},{target:"component",action:"render"}]},externalChange:{send:function(e,t){return"component"===e.target&&this.base.updateState(),[this.params]},retrieve:function(e,t,n){"component"===e.target&&n&&"string"==typeof n&&this.base.onRender(n)},sequence:[{target:"state",action:"change"},{target:"component",action:"render"}]},globalChange:{send:function(e,t){return"state"===e.target?t===!1&&(this.base.state.updateGlobalProps(),this.base.updateState()):this.base.updateState(),[this.params]},retrieve:function(e,t,n){"component"===e.target&&n&&"string"==typeof n&&this.base.onRender(n)},sequence:[{target:"state",action:"change"},{target:"component",action:"render"}]},referenceChange:{send:function(e,t){return"state"===e.target?t===!1&&this.base.state.updateReferencedProps():this.base.updateState(),[this.params]},retrieve:function(e,t,n){"component"===e.target&&n&&"string"==typeof n&&this.base.onRender(n)},sequence:[{target:"state",action:"change"},{target:"component",action:"render"}]},destroy:{send:function(e,t){return[]},retrieve:function(e,t,n){},sequence:[{target:"state",action:"destroy"},{target:"component",action:"destroy"}]},mountModifier:{send:function(e,t){return"pre"===t&&this.base.addRoutes(),[this.params]},sequence:[{target:"modifier",action:"mount"}]}}},function(e,t){(function(t){function n(e,t){"use strict";function n(){var e=S.splice(0,S.length);for($e=0;e.length;)e.shift().call(null,e.shift())}function o(e,t){for(var n=0,o=e.length;n<o;n++)m(e[n],t)}function r(e){for(var t,n=0,o=e.length;n<o;n++)t=e[n],N(t,re[a(t)])}function i(e){return function(t){Ae(t)&&(m(t,e),o(t.querySelectorAll(ie),e))}}function a(e){var t=Ge.call(e,"is"),n=e.nodeName.toUpperCase(),o=se.call(oe,t?ee+t.toUpperCase():Y+n);return t&&-1<o&&!s(n,t)?-1:o}function s(e,t){return-1<ie.indexOf(e+'[is="'+t+'"]')}function l(e){var t=e.currentTarget,n=e.attrChange,o=e.attrName,r=e.target,i=e[B]||2,a=e[$]||3;!Ye||r&&r!==t||!t[G]||"style"===o||e.prevValue===e.newValue&&(""!==e.newValue||n!==i&&n!==a)||t[G](o,n===i?null:e.prevValue,n===a?null:e.newValue)}function c(e){var t=i(e);return function(e){S.push(t,e.target),$e&&clearTimeout($e),$e=setTimeout(n,1)}}function u(e){We&&(We=!1,e.currentTarget.removeEventListener(Q,u)),o((e.target||C).querySelectorAll(ie),e.detail===q?q:D),Ie&&p()}function f(e,t){var n=this;Ue.call(n,e,t),L.call(n,{target:n})}function h(e,t){He(e,t),P?P.observe(e,Be):(Qe&&(e.setAttribute=f,e[j]=w(e),e[A](W,L)),e[A](K,l)),e[z]&&Ye&&(e.created=!0,e[z](),e.created=!1)}function p(){for(var e,t=0,n=De.length;t<n;t++)e=De[t],ae.contains(e)||(n--,De.splice(t--,1),m(e,q))}function d(e){throw new Error("A "+e+" type is already registered")}function m(e,t){var n,o=a(e);-1<o&&(x(e,re[o]),o=0,t!==D||e[D]?t!==q||e[q]||(e[D]=!1,e[q]=!0,o=1):(e[q]=!1,e[D]=!0,o=1,Ie&&se.call(De,e)<0&&De.push(e)),o&&(n=e[t+R])&&n.call(e))}function v(){}function g(e,t,n){var o=n&&n[F]||"",r=t.prototype,i=Pe(r),a=t.observedAttributes||he,s={prototype:i};je(i,z,{value:function(){if(ke)ke=!1;else if(!this[ye]){this[ye]=!0,new t(this),r[z]&&r[z].call(this);var e=Se[_e.get(t)];(!Te||e.create.length>1)&&E(this)}}}),je(i,G,{value:function(e){-1<se.call(a,e)&&r[G].apply(this,arguments)}}),r[J]&&je(i,V,{value:r[J]}),r[U]&&je(i,X,{value:r[U]}),o&&(s[F]=o),e=e.toUpperCase(),Se[e]={constructor:t,create:o?[o,we(e)]:[e]},_e.set(t,e),C[I](e.toLowerCase(),s),T(e),Le[e].r()}function b(e){var t=Se[e.toUpperCase()];return t&&t.constructor}function y(e){return"string"==typeof e?e:e&&e.is||""}function E(e){for(var t,n=e[G],o=n?e.attributes:he,r=o.length;r--;)t=o[r],n.call(e,t.name||t.nodeName,null,t.value||t.nodeValue)}function T(e){return e=e.toUpperCase(),e in Le||(Le[e]={},Le[e].p=new Oe(function(t){Le[e].r=t})),Le[e].p}function M(){Ee&&delete e.customElements,fe(e,"customElements",{configurable:!0,value:new v}),fe(e,"CustomElementRegistry",{configurable:!0,value:v});for(var t=function(t){var n=e[t];if(n){e[t]=function(e){var t,o;return e||(e=this),e[ye]||(ke=!0,t=Se[_e.get(e.constructor)],o=Te&&1===t.create.length,e=o?Reflect.construct(n,he,t.constructor):C.createElement.apply(C,t.create),e[ye]=!0,ke=!1,o||E(e)),e},e[t].prototype=n.prototype;try{n.prototype.constructor=e[t]}catch(o){be=!0,fe(n,ye,{value:e[t]})}}},n=k.get(/^HTML[A-Z]*[a-z]/),o=n.length;o--;t(n[o]));C.createElement=function(e,t){var n=y(t);return n?Xe.call(this,e,we(n)):Xe.call(this,e)}}var C=e.document,O=e.Object,k=function(e){var t,n,o,r,i=/^[A-Z]+[a-z]/,a=function(e){var t,n=[];for(t in l)e.test(t)&&n.push(t);return n},s=function(e,t){t=t.toLowerCase(),t in l||(l[e]=(l[e]||[]).concat(t),l[t]=l[t.toUpperCase()]=e)},l=(O.create||O)(null),c={};for(n in e)for(r in e[n])for(o=e[n][r],l[r]=o,t=0;t<o.length;t++)l[o[t].toLowerCase()]=l[o[t].toUpperCase()]=r;return c.get=function(e){return"string"==typeof e?l[e]||(i.test(e)?[]:""):a(e)},c.set=function(e,t){return i.test(e)?s(e,t):s(t,e),c},c}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});t||(t="auto");var S,L,_,w,P,H,x,N,I="registerElement",j="__"+I+(1e5*e.Math.random()>>0),A="addEventListener",D="attached",R="Callback",q="detached",F="extends",G="attributeChanged"+R,V=D+R,J="connected"+R,U="disconnected"+R,z="created"+R,X=q+R,B="ADDITION",Z="MODIFICATION",$="REMOVAL",K="DOMAttrModified",Q="DOMContentLoaded",W="DOMSubtreeModified",Y="<",ee="=",te=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,ne=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],oe=[],re=[],ie="",ae=C.documentElement,se=oe.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},le=O.prototype,ce=le.hasOwnProperty,ue=le.isPrototypeOf,fe=O.defineProperty,he=[],pe=O.getOwnPropertyDescriptor,de=O.getOwnPropertyNames,me=O.getPrototypeOf,ve=O.setPrototypeOf,ge=!!O.__proto__,be=!1,ye="__dreCEv1",Ee=e.customElements,Te="force"!==t&&!!(Ee&&Ee.define&&Ee.get&&Ee.whenDefined),Me=O.create||O,Ce=e.Map||function(){var e,t=[],n=[];return{get:function(e){return n[se.call(t,e)]},set:function(o,r){e=se.call(t,o),e<0?n[t.push(o)-1]=r:n[e]=r}}},Oe=e.Promise||function(e){function t(e){for(o=!0;n.length;)n.shift()(e)}var n=[],o=!1,r={catch:function(){return r},then:function(e){return n.push(e),o&&setTimeout(t,1),r}};return e(t),r},ke=!1,Se=Me(null),Le=Me(null),_e=new Ce,we=String,Pe=O.create||function e(t){return t?(e.prototype=t,new e):this},He=ve||(ge?function(e,t){return e.__proto__=t,e}:de&&pe?function(){function e(e,t){for(var n,o=de(t),r=0,i=o.length;r<i;r++)n=o[r],ce.call(e,n)||fe(e,n,pe(t,n))}return function(t,n){do e(t,n);while((n=me(n))&&!ue.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),xe=e.MutationObserver||e.WebKitMutationObserver,Ne=(e.HTMLElement||e.Element||e.Node).prototype,Ie=!ue.call(Ne,ae),je=Ie?function(e,t,n){return e[t]=n.value,e}:fe,Ae=Ie?function(e){return 1===e.nodeType}:function(e){return ue.call(Ne,e)},De=Ie&&[],Re=Ne.attachShadow,qe=Ne.cloneNode,Fe=Ne.dispatchEvent,Ge=Ne.getAttribute,Ve=Ne.hasAttribute,Je=Ne.removeAttribute,Ue=Ne.setAttribute,ze=C.createElement,Xe=ze,Be=xe&&{attributes:!0,characterData:!0,attributeOldValue:!0},Ze=xe||function(e){Qe=!1,ae.removeEventListener(K,Ze)},$e=0,Ke=!1,Qe=!0,We=!0,Ye=!0;if(I in C||(ve||ge?(x=function(e,t){ue.call(t,e)||h(e,t)},N=h):(x=function(e,t){e[j]||(e[j]=O(!0),h(e,t))},N=x),Ie?(Qe=!1,function(){var e=pe(Ne,A),t=e.value,n=function(e){var t=new CustomEvent(K,{bubbles:!0});t.attrName=e,t.prevValue=Ge.call(this,e),t.newValue=null,t[$]=t.attrChange=2,Je.call(this,e),Fe.call(this,t)},o=function(e,t){var n=Ve.call(this,e),o=n&&Ge.call(this,e),r=new CustomEvent(K,{bubbles:!0});Ue.call(this,e,t),r.attrName=e,r.prevValue=n?o:null,r.newValue=t,n?r[Z]=r.attrChange=1:r[B]=r.attrChange=0,Fe.call(this,r)},r=function(e){var t,n=e.currentTarget,o=n[j],r=e.propertyName;o.hasOwnProperty(r)&&(o=o[r],t=new CustomEvent(K,{bubbles:!0}),t.attrName=o.name,t.prevValue=o.value||null,t.newValue=o.value=n[r]||null,null==t.prevValue?t[B]=t.attrChange=0:t[Z]=t.attrChange=1,Fe.call(n,t))};e.value=function(e,i,a){e===K&&this[G]&&this.setAttribute!==o&&(this[j]={className:{name:"class",value:this.className}},this.setAttribute=o,this.removeAttribute=n,t.call(this,"propertychange",r)),t.call(this,e,i,a)},fe(Ne,A,e)}()):xe||(ae[A](K,Ze),ae.setAttribute(j,1),ae.removeAttribute(j),Qe&&(L=function(e){var t,n,o,r=this;if(r===e.target){t=r[j],r[j]=n=w(r);for(o in n){if(!(o in t))return _(0,r,o,t[o],n[o],B);if(n[o]!==t[o])return _(1,r,o,t[o],n[o],Z)}for(o in t)if(!(o in n))return _(2,r,o,t[o],n[o],$)}},_=function(e,t,n,o,r,i){var a={attrChange:e,currentTarget:t,attrName:n,prevValue:o,newValue:r};a[i]=e,l(a)},w=function(e){for(var t,n,o={},r=e.attributes,i=0,a=r.length;i<a;i++)t=r[i],n=t.name,"setAttribute"!==n&&(o[n]=t.value);return o})),C[I]=function(e,t){if(n=e.toUpperCase(),Ke||(Ke=!0,xe?(P=function(e,t){function n(e,t){for(var n=0,o=e.length;n<o;t(e[n++]));}return new xe(function(o){for(var r,i,a,s=0,l=o.length;s<l;s++)r=o[s],"childList"===r.type?(n(r.addedNodes,e),n(r.removedNodes,t)):(i=r.target,Ye&&i[G]&&"style"!==r.attributeName&&(a=Ge.call(i,r.attributeName),a!==r.oldValue&&i[G](r.attributeName,r.oldValue,a)))})}(i(D),i(q)),H=function(e){return P.observe(e,{childList:!0,subtree:!0}),e},H(C),Re&&(Ne.attachShadow=function(){return H(Re.apply(this,arguments))})):(S=[],C[A]("DOMNodeInserted",c(D)),C[A]("DOMNodeRemoved",c(q))),C[A](Q,u),C[A]("readystatechange",u),Ne.cloneNode=function(e){var t=qe.call(this,!!e),n=a(t);return-1<n&&N(t,re[n]),e&&r(t.querySelectorAll(ie)),t}),-2<se.call(oe,ee+n)+se.call(oe,Y+n)&&d(e),!te.test(n)||-1<se.call(ne,n))throw new Error("The type "+e+" is invalid");var n,s,l=function(){return h?C.createElement(p,n):C.createElement(p)},f=t||le,h=ce.call(f,F),p=h?t[F].toUpperCase():n;return h&&-1<se.call(oe,Y+p)&&d(p),s=oe.push((h?ee:Y)+n)-1,ie=ie.concat(ie.length?",":"",h?p+'[is="'+e.toLowerCase()+'"]':p),l.prototype=re[s]=ce.call(f,"prototype")?f.prototype:Pe(Ne),o(C.querySelectorAll(ie),D),l},C.createElement=Xe=function(e,t){var n=y(t),o=n?ze.call(C,e,we(n)):ze.call(C,e),r=""+e,i=se.call(oe,(n?ee:Y)+(n||r).toUpperCase()),a=-1<i;return n&&(o.setAttribute("is",n=n.toLowerCase()),a&&(a=s(r.toUpperCase(),n))),Ye=!C.createElement.innerHTMLHelper,a&&N(o,re[i]),o}),v.prototype={constructor:v,define:Te?function(e,t,n){if(n)g(e,t,n);else{var o=e.toUpperCase();Se[o]={constructor:t,create:[o]},_e.set(t,o),Ee.define(e,t)}}:g,get:Te?function(e){return Ee.get(e)||b(e)}:b,whenDefined:Te?function(e){return Oe.race([Ee.whenDefined(e),T(e)])}:T},Ee&&"force"!==t)try{!function(t,n,o){if(n[F]="a",t.prototype=Pe(HTMLAnchorElement.prototype),t.prototype.constructor=t,e.customElements.define(o,t,n),Ge.call(C.createElement("a",{is:o}),"is")!==o||Te&&Ge.call(new t,"is")!==o)throw n}(function e(){return Reflect.construct(HTMLAnchorElement,[],e)},{},"document-register-element-a")}catch(e){M()}else M();try{ze.call(C,"a","a")}catch(e){we=function(e){return{is:e}}}}e.exports=n,n(t)}).call(t,function(){return this}())}])});